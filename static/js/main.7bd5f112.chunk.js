(this.webpackJsonpcarbodydesigner=this.webpackJsonpcarbodydesigner||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var r,i,a,o=n(5),s=n.n(o),c=n(43),u=n.n(c),l=(n(86),n(14)),h=n(15),d=n(1),f=n(2),p=n(3),v=n(4),m=(n(87),n(17)),g=n(6),y=n(71),b=function(){function e(t,n,r){Object(d.a)(this,e),this.lengthPoints=t,this.widthPoints=n,this.heightPoints=r}return Object(f.a)(e,[{key:"halfLegth",get:function(){return(this.lengthPoints-1)/2}},{key:"halfWidth",get:function(){return(this.widthPoints-1)/2}},{key:"halfHeight",get:function(){return(this.heightPoints-1)/2}}]),e}(),w=n(9),S=n(16);!function(e){e[e.Uniform=0]="Uniform",e[e.LSymmetrical=1]="LSymmetrical",e[e.WSymmetrical=2]="WSymmetrical",e[e.LWSymmetrical=3]="LWSymmetrical"}(r||(r={})),function(e){e[e.All=0]="All",e[e.Odd=1]="Odd",e[e.Even=2]="Even"}(i||(i={})),function(e){e[e.CW=1]="CW",e[e.CCW=2]="CCW"}(a||(a={}));var x,k,O,C=function(){function e(t){var n=this;Object(d.a)(this,e),this.props=void 0,this.vertices=[],this.indices=[],this.uvs=[],this.normals=[];var i=t.length,a=t.width,o=t.pointsMapper,s=(t.direction,this.vertices),c=this.indices,u=this.uvs;this.props=t;var h,f=Object(S.a)(w.Generate.range(0,i));try{for(f.s();!(h=f.n()).done;){var p,v=h.value,m=Object(S.a)(w.Generate.range(0,a));try{for(m.s();!(p=m.n()).done;){var g=p.value;s.push({vertice:o(v,g),handlers:[]}),u.push(.5,.5)}}catch(I){m.e(I)}finally{m.f()}}}catch(I){f.e(I)}finally{f.f()}var y,b=Object(S.a)(w.Generate.range(0,i));try{for(b.s();!(y=b.n()).done;){var x,k=y.value,O=Object(S.a)(w.Generate.range(0,a));try{for(O.s();!(x=O.n()).done;){var C=o(k,x.value);s.push({vertice:C,handlers:[]}),u.push(.5,.5)}}catch(I){O.e(I)}finally{O.f()}}}catch(I){b.e(I)}finally{b.f()}var j,E=function(e,t,o,s){var c=n.props.mode,u=(i-1)/2,l=(a-1)/2,h=e+t*a+o,d=h+1,f=h+a,p=f+1;switch(s){case"front":switch(c){case r.Uniform:return[h,d,f,d,p,f];case r.LSymmetrical:return t<u?[h,d,p,h,p,f]:[h,d,f,d,p,f];case r.WSymmetrical:return o<l?[h,d,p,h,p,f]:[h,d,f,d,p,f];case r.LWSymmetrical:return o<l===t<u?[h,d,p,h,p,f]:[h,d,f,d,p,f]}break;case"back":switch(c){case r.Uniform:return[h,f,d,d,f,p];case r.LSymmetrical:return t<u?[h,p,d,h,f,p]:[h,f,d,d,f,p];case r.WSymmetrical:return o<l?[h,p,d,h,f,p]:[h,f,d,d,f,p];case r.LWSymmetrical:return o<l===t<u?[h,p,d,h,f,p]:[h,f,d,d,f,p]}}return[]},M=Object(S.a)(w.Generate.range(0,i-1));try{for(M.s();!(j=M.n()).done;){var D,P=j.value,T=Object(S.a)(w.Generate.range(0,a-1));try{for(T.s();!(D=T.n()).done;){var W=D.value;this.parityMatch((P+W)%2!==0)&&c.push.apply(c,Object(l.a)(E(0,P,W,"front")))}}catch(I){T.e(I)}finally{T.f()}}}catch(I){M.e(I)}finally{M.f()}var R,N=Object(S.a)(w.Generate.range(0,i-1));try{for(N.s();!(R=N.n()).done;){var z,A=R.value,F=Object(S.a)(w.Generate.range(0,a-1));try{for(F.s();!(z=F.n()).done;){var L=z.value;this.parityMatch((A+L)%2!==0)&&c.push.apply(c,Object(l.a)(E(this.offset,A,L,"back")))}}catch(I){F.e(I)}finally{F.f()}}}catch(I){N.e(I)}finally{N.f()}}return Object(f.a)(e,[{key:"offset",get:function(){return this.props.length*this.props.width}},{key:"width",get:function(){return this.props.width}},{key:"length",get:function(){return this.props.length}}]),Object(f.a)(e,[{key:"parityMatch",value:function(e){switch(this.props.parity){case i.Even:return!1===e;case i.Odd:return!0===e;default:return!0}}},{key:"getVertice",value:function(e){return this.vertices[e].vertice}},{key:"apply",value:function(e){var t,n=this.props,r=n.length,i=n.width,a=this.vertices,o=Object(S.a)(w.Generate.range(0,r));try{for(o.s();!(t=o.n()).done;){var s,c=t.value,u=Object(S.a)(w.Generate.range(0,i));try{for(u.s();!(s=u.n()).done;){var l=s.value;e(c,l,a[c*i+l])}}catch(g){u.e(g)}finally{u.f()}}}catch(g){o.e(g)}finally{o.f()}var h,d=Object(S.a)(w.Generate.range(0,r));try{for(d.s();!(h=d.n()).done;){var f,p=h.value,v=Object(S.a)(w.Generate.range(0,i));try{for(v.s();!(f=v.n()).done;){var m=f.value;e(p,m,a[this.offset+p*i+m])}}catch(g){v.e(g)}finally{v.f()}}}catch(g){d.e(g)}finally{d.f()}}},{key:"transformedVertices",value:function(e){var t=this.vertices,n=t.map((function(e){return e.vertice})),r=[];return t.forEach((function(t){var i=t.vertice;t.handlers.forEach((function(e){i=e(i,n)})),r.push({x:i.x*e,y:i.y*e,z:i.z*e})})),r}},{key:"geometry",value:function(e){var t=this.vertices,n=this.indices,r=this.uvs,i=this.normals,a=this.props.log,o=new g.d,s=[];this.transformedVertices(e).forEach((function(e){return s.push(e.x,e.y,e.z)}));for(var c=function(e){var n=t[e].vertice;return new g.A(n.x,n.y,n.z)},u=0,l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var o=a[r];i[u++]=o}},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];a&&console.log(o),l(o.x,o.y,o.z)}},d=0;d<n.length;d+=3){var f=(new g.A).subVectors(c(n[d+1]),c(n[d])),p=(new g.A).subVectors(c(n[d+2]),c(n[d])),v=(new g.A).crossVectors(f,p).normalize();h(v,v,v)}return o.setAttribute("position",new g.h(s,3)),o.setAttribute("normal",new g.h(i,3)),o.setAttribute("uv",new g.h(r,2)),o.setIndex(n),o.computeVertexNormals(),o}}]),e}(),j=function(){function e(t,n){Object(d.a)(this,e),this.countour=t,this.segments=n}return Object(f.a)(e,[{key:"query",value:function(e){for(var t=this.countour,n=this.segments,r=e;r>=0;r--)if(n[r])return n[r];return t}}]),e}(),E=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,i,o,s){var c;Object(d.a)(this,n),(c=t.call(this,e,i,o)).left=void 0,c.right=void 0,c.front=void 0,c.back=void 0,c.top=void 0,c.bottom=void 0;var u=e-1,l=i-1,h=o-1,f=function(e){var t=e.map((function(e){return e}));return{x:t[0],y:t[1],z:t[2]}};return c.left=new C({length:e,width:o,pointsMapper:function(e,t){return f([e-0,t-0,l-0])},mode:r.LSymmetrical,parity:s,direction:a.CW}),c.right=new C({length:e,width:o,pointsMapper:function(e,t){return f([e-0,t-0,-0])},mode:r.LSymmetrical,parity:s,direction:a.CCW}),c.front=new C({length:i,width:o,pointsMapper:function(e,t){return f([-0,t-0,e-0])},mode:r.LSymmetrical,parity:s,direction:a.CW}),c.back=new C({length:i,width:o,pointsMapper:function(e,t){return f([u-0,t-0,e-0])},mode:r.LSymmetrical,parity:s,direction:a.CCW}),c.top=new C({length:e,width:i,pointsMapper:function(e,t){return f([e-0,h-0,t-0])},mode:r.LWSymmetrical,parity:s,direction:a.CCW}),c.bottom=new C({length:e,width:i,pointsMapper:function(e,t){return f([e-0,0,t-0])},mode:r.LWSymmetrical,parity:s,direction:a.CW}),c}return Object(f.a)(n,[{key:"applyContour",value:function(e,t,n,r,i){var a=this,o=this.lengthPoints,s=this.widthPoints,c=this.heightPoints,u=function(e,t,n){return(e-t)*n+t},l=new j(t,i),h=function(e){return l.query(e)};this.left.apply((function(t,i,o){var l=h(t)[s-1].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e){var t=r.find((function(t){return w.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(t){var n=w.Tools.pythHB(t.arcRadius,t.center.x-e.x),i=Math.max(t.center.y+n,e.y*d*l);return{x:e.x,y:i,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.right.apply((function(t,i,o){var l=h(t)[0].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e){var t=r.find((function(t){return w.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(t){var n=w.Tools.pythHB(t.arcRadius,t.center.x-e.x),i=Math.max(t.center.y+n,e.y*d*l);return{x:e.x,y:i,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.top.apply((function(t,i,o){var l=h(t)[i].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e){var t=r.find((function(t){return w.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(t){var n=w.Tools.pythHB(t.arcRadius,t.center.x-e.x),i=e.y*d*l,o=0===e.z||e.z===s-1?0:1,c=t.center.y+n+o,h=w.Tools.betweenInclusive(e.z,a.halfWidth-t.offset+1,a.halfWidth+t.offset-1)?i:Math.max(i,c);return{x:e.x,y:h,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.bottom.apply((function(t,i,o){var l=h(t)[i].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e,t){var n=r.find((function(t){return w.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(n){var i=w.Tools.pythHB(n.arcRadius,n.center.x-e.x),o=w.Tools.betweenInclusive(e.z,a.halfWidth-n.offset,a.halfWidth+n.offset)?e.y*d*l:n.center.y+i;return{x:e.x,y:o,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.front.apply((function(t,r,i){var o=h(0)[t].y/c,l=e[0].y/c,d=n[0].y/s;i.handlers=[function(e){return{x:e.x,y:e.y*l*o,z:u(e.z,a.halfWidth,d)}}]})),this.back.apply((function(t,r,i){var l=h(a.top.length-1)[t].y/c,d=e[o-1].y/c,f=n[o-1].y/s;i.handlers=[function(e){return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]}))}},{key:"sectionPoints",value:function(e,t){var n=this.front,r=this.top,i={front:[],side:[],top:[]};if(null===t||[t.front,t.side,t.top].every((function(e){return null===e})))return i;var a=r.transformedVertices(1);if(null!==t.front)if(e.frontSegments[t.front]){var o;(o=i.front).push.apply(o,Object(l.a)(e.frontSegments[t.front]))}else{var s,c=w.Generate.range(0,n.length).map((function(e){return a[e+(t.front||0)*n.length]}));(s=i.front).push.apply(s,Object(l.a)(c.map((function(e){return{x:e.x,y:e.y}}))))}if(null!==t.top){var u,h=w.Generate.range(0,r.length).map((function(e){return a[(t.top||0)+e*r.width]}));(u=i.top).push.apply(u,Object(l.a)(h.map((function(e){return{x:e.x,y:e.z}}))))}if(null!==t.side){var d,f=w.Generate.range(0,r.length).map((function(e){return a[(t.side||0)+e*r.width]}));(d=i.side).push.apply(d,Object(l.a)(f.map((function(e){return{x:e.x,y:e.y}}))))}return i}},{key:"geometry",get:function(){return[this.left,this.right,this.front,this.back,this.top,this.bottom].map((function(e){return e.geometry(5)}))}}]),n}(b),M=n(51),D=n(117),P=n(118),T=function(){function e(t){Object(d.a)(this,e),this.design=t}return Object(f.a)(e,[{key:"interpolateSections",value:function(){for(var e=this.design.boxSize,t=this.interpolationSource,n=this.existingIndexes,r=function(r){for(var i=n[r],a=t[i],o=n[r+1],s=t[o],c=o-i,u=w.Generate.range(0,e.y).map((function(e){return(s[e].y-a[e].y)/c})),l=function(n){var r=w.Generate.range(0,e.y).map((function(e){return{x:e,y:a[e].y+u[e]*(n-i)}}));t[n]=r},h=i+1;h<o;h++)l(h)},i=0;i<n.length-1;i++)r(i);return t}},{key:"interpolationSource",get:function(){var e=this.design,t=e.frontSegments,n=e.frontPoints,r=Object(l.a)(t);return r[0]||(r[0]=Object(l.a)(n)),r}},{key:"existingIndexes",get:function(){var e=this.design.boxSize,t=this.interpolationSource;return w.Generate.range(0,e.x).filter((function(e){return t[e]}))}}]),e}(),W=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"geometry",value:function(e){var t,n=[],r=function(e){var t=Math.min(e.wheelRadius,e.arcRadius-.5),n=new g.e(5*t,5*t,5*e.width,32);return n.rotateX(Math.PI/2),n},i=Object(S.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r(a);o.translate(5*a.center.x,5*a.center.y,5*(this.halfWidth-a.offset)-5*a.width/2),n.push(o);var s=r(a);s.translate(5*a.center.x,5*a.center.y,5*(this.halfWidth+a.offset)+5*a.width/2),n.push(s)}}catch(c){i.e(c)}finally{i.f()}return n}}]),n}(b),R=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e))._subscription=void 0,r._updateStream=new M.a,r.scene=null,r.camera=null,r.light=null,r.renderer=null,r.bodyMesh=null,r.orbitControls=null,r.groundControls=[],r.container=null,r.ang=0,r.state={flatShading:!0},r.animate=r.animate.bind(Object(m.a)(r)),r._subscription=r._updateStream.pipe(Object(D.a)((function(){return Object(P.a)(500)}))).subscribe((function(){return r.updateMesh("debounce")})),r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.init(),this.subscribeForResizeEvents(),this.updateMesh("mount"),requestAnimationFrame(this.animate),this.forceUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n;e.renderSettings.ground!==this.props.renderSettings.ground&&(this.props.renderSettings.ground?null===(t=this.scene)||void 0===t||t.add.apply(t,Object(l.a)(this.groundControls)):null===(n=this.scene)||void 0===n||n.remove.apply(n,Object(l.a)(this.groundControls)));this._updateStream.next({})}},{key:"componentWillUnmount",value:function(){this._subscription.unsubscribe()}},{key:"updateMesh",value:function(e){var t=this,n=this.scene;if(n){this.bodyMesh&&this.bodyMesh.forEach((function(e){var n;return null===(n=t.scene)||void 0===n?void 0:n.remove(e)})),this.bodyMesh=[];for(var r=this.props,a=r.design,o=r.renderSettings,s=a.boxSize,c=a.frontPoints,u=a.sidePoints,h=a.topPoints,d=a.colorOdd,f=a.colorEven,p=a.colorWheels,v=a.wheels,m=o.flatShading,y=o.wireframes,b=o.renderWheels,w=[{parity:i.Odd,color:d},{parity:i.Even,color:f}],S=new T(a).interpolateSections(),x=function(){var e,n=O[k],r=new E(s.x,s.y,s.z,n.parity);r.applyContour(u,c,h,v,S);var i=new g.p({color:y?65280:n.color,wireframe:y,flatShading:m});(e=t.bodyMesh).push.apply(e,Object(l.a)(r.geometry.map((function(e){return new g.n(e,i)}))))},k=0,O=w;k<O.length;k++)x();if(b){var C,j=new g.p({color:y?65280:p,wireframe:y,flatShading:m}),M=new W(s.x,s.y,s.z);(C=this.bodyMesh).push.apply(C,Object(l.a)(M.geometry(v).map((function(e){return new g.n(e,j)}))))}this.bodyMesh.forEach((function(e){return n.add(e)}))}}},{key:"initGround",value:function(){var e;if(this.scene){var t=new g.n(new g.r(2e3,2e3),new g.p({color:10066329,depthWrite:!1}));t.rotation.x=-Math.PI/2,t.receiveShadow=!0;var n=new g.i(2e3,20,0,0),r=n.material;r.opacity=.2,r.transparent=!0,this.groundControls=[t,n],(e=this.scene).add.apply(e,Object(l.a)(this.groundControls))}}},{key:"init",value:function(){this.scene=new g.t;var e=new g.b(500);this.scene.add(e),this.camera=new g.q(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.x=-300,this.camera.position.z=300,this.camera.position.y=300,this.renderer=new g.B,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.orbitControls=new y.a(this.camera,this.renderer.domElement),this.orbitControls.target.set(0,25,0),this.orbitControls.update(),this.scene.add(new g.a(7829367)),this.light=new g.f(14674943,1),this.light.position.set(500,600,700),this.light.castShadow=!0,this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024;var t=300;this.light.shadow.camera.left=-t,this.light.shadow.camera.right=t,this.light.shadow.camera.top=t,this.light.shadow.camera.bottom=-t,this.light.shadow.camera.far=1e3,this.scene.add(this.light),this.initGround()}},{key:"animate",value:function(){var e=this.props.renderSettings,t=this.renderer,n=this.scene,r=this.camera,i=this.orbitControls;if(requestAnimationFrame(this.animate),e.lightOrbit){var a,o;this.ang+=.01;var s=new g.A(500,600,700);s.applyAxisAngle(new g.A(0,1,0),this.ang),null===(a=this.light)||void 0===a||null===(o=a.position)||void 0===o||o.set(s.x,s.y,s.z)}null===i||void 0===i||i.update(),t&&n&&r&&t.render(n,r)}},{key:"onContainerCreated",value:function(e){var t,n;(this.container=e,e&&(null===(t=this.renderer)||void 0===t?void 0:t.domElement))&&(this.renderer.setSize(e.offsetWidth-2,e.offsetHeight-2),this.camera&&(this.camera.aspect=e.offsetWidth/e.offsetHeight,this.camera.updateProjectionMatrix()),null===(n=e.appendChild)||void 0===n||n.call(e,this.renderer.domElement))}},{key:"subscribeForResizeEvents",value:function(){var e=this;window.addEventListener("resize",(function(){var t=e.renderer,n=e.camera,r=e.container;if(t&&r&&n){var i=r.offsetWidth-2,a=r.offsetHeight-2;n.aspect=i/a,n.updateProjectionMatrix(),t.setSize(i,a)}}))}},{key:"render",value:function(){var e=this,t=this.props,n={width:t.width,height:t.height};return s.a.createElement("div",{style:n},s.a.createElement("div",{style:n,ref:function(t){return e.onContainerCreated(t)}}))}}]),n}(s.a.Component),N=(n(25),n(20));!function(e){e[e.Contour=0]="Contour",e[e.Wheel=1]="Wheel"}(x||(x={})),function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Side=2]="Side"}(k||(k={})),function(e){e[e.None=0]="None",e[e.Pick=1]="Pick",e[e.Edit=2]="Edit"}(O||(O={}));n(90);var z,A=function(){function e(t,n,r){Object(d.a)(this,e),this.margin=t,this.scale=n,this.toCtx=r}return Object(f.a)(e,[{key:"drawWheelSide",value:function(e,t){var n=this.margin,r=this.scale,i=this.toCtx,a=i(t.center),o=i({x:t.center.x-t.wheelRadius,y:t.center.y}),s=i({x:t.center.x-t.wheelRadius,y:0}),c=i({x:t.center.x+t.wheelRadius,y:t.center.y}),u=i({x:t.center.x+t.wheelRadius,y:0}),l=i({x:t.center.x,y:t.center.y+t.wheelRadius});e.beginPath(),e.arc(n+a.x,n+a.y,t.wheelRadius*r,Math.PI,2*Math.PI),e.moveTo(n+o.x,n+o.y),e.lineTo(n+s.x,n+s.y),e.moveTo(n+c.x,n+c.y),e.lineTo(n+u.x,n+u.y),e.stroke(),e.beginPath(),e.arc(n+a.x,n+a.y,5,0,2*Math.PI),e.arc(n+l.x,n+l.y,5,0,2*Math.PI),e.fill()}},{key:"drawWheelTop",value:function(e,t){var n=this.margin,r=this.toCtx,i=r({x:t.center.x,y:2*t.offset}),a=r({x:t.center.x,y:2*(t.offset+t.width)}),o=[{x:t.center.x-t.wheelRadius,y:2*t.offset},{x:t.center.x+t.wheelRadius,y:2*t.offset},{x:t.center.x+t.wheelRadius,y:2*(t.offset+t.width)},{x:t.center.x-t.wheelRadius,y:2*(t.offset+t.width)}].map(r);e.beginPath(),e.moveTo(n+o[3].x,n+o[3].y),o.forEach((function(t,r){e.lineTo(n+t.x,n+t.y)})),e.stroke(),e.beginPath(),e.arc(n+i.x,n+i.y,5,0,2*Math.PI),e.arc(n+a.x,n+a.y,5,0,2*Math.PI),e.fill()}}]),e}();!function(e){e[e.Create=0]="Create",e[e.MoveCenter=1]="MoveCenter",e[e.ChangeRadius=2]="ChangeRadius",e[e.ChangeWidth=3]="ChangeWidth",e[e.ChangeOffset=4]="ChangeOffset"}(z||(z={}));var F=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).canvas=null,r.sectionCanvas=null,r.buffer=null,r.enabled=!1,r.lastPoint=null,r.state={scale:0,margin:25,sectionSelectorHeight:80,wheelMode:z.Create,wheelIndex:-1},r.onMouseUp=r.onMouseUp.bind(Object(m.a)(r)),r.processPoints=r.processPoints.bind(Object(m.a)(r)),r.buffer=new w.BufferStream(50,r.processPoints),r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onMouseUp),this.updateScale()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onMouseUp)}},{key:"updateScale",value:function(){var e=this.props,t=e.width,n=e.height,r=e.contour,i=e.maxY,a=this.state,o=a.sectionSelectorHeight,s=a.scale,c=a.margin,u=Math.min(Math.floor((t-2*c-20)/r.length),Math.floor((n-2*c-o)/i));s!==u&&this.setState({scale:u})}},{key:"mouseDisconnected",value:function(){var e=this;this.enabled=!1,this.lastPoint=null,this.setState({wheelMode:z.Create,wheelIndex:-1},(function(){var t=e.props,n=t.contour,r=t.wheels,i=t.onCountourChange;r&&i(n,r.filter((function(e){return e.arcRadius>2})))}))}},{key:"onMouseUp",value:function(e){this.enabled&&(null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault(),this.mouseDisconnected())}},{key:"componentDidUpdate",value:function(){this.drawSignal(),this.updateScale()}},{key:"drawGrid",value:function(e){var t=this.props,n=t.contour,r=t.maxY,i=this.state,a=i.scale,o=i.margin,s=(n.length-1)*a,c=r*a;e.clearRect(0,0,s+2*o,c+2*o),e.setLineDash([]),e.lineWidth=1,e.beginPath(),e.moveTo(o,o+c),e.lineTo(o+s,o+c),e.stroke(),e.setLineDash([1,2]);var u,l=Object(S.a)(w.Generate.range(0,n.length));try{for(l.s();!(u=l.n()).done;){var h=u.value;e.moveTo(o+h*a,o),e.lineTo(o+h*a,o+c)}}catch(v){l.e(v)}finally{l.f()}var d,f=Object(S.a)(w.Generate.range(0,r));try{for(f.s();!(d=f.n()).done;){var p=d.value;e.moveTo(o+0,o+p*a),e.lineTo(o+s,o+p*a)}}catch(v){f.e(v)}finally{f.f()}e.strokeStyle="#000000",e.stroke(),e.setLineDash([])}},{key:"translate",value:function(e){var t=this.props.maxY*this.state.scale;return e?{x:Math.floor(e.x),y:t-e.y}:{x:0,y:0}}},{key:"samplePoint",value:function(e,t){return this.scalePoint(e[t])}},{key:"scalePoint",value:function(e){var t=this.state.scale;return e?{x:e.x*t,y:e.y*t}:null}},{key:"drawWheels",value:function(e){var t,n=this,r=this.props,i=r.wheels,a=r.wheelDrawing,o=this.state,s=o.margin,c=o.scale,u=new A(s,c,(function(e){return n.translate(n.scalePoint(e))})),l=Object(S.a)(i||[]);try{for(l.s();!(t=l.n()).done;){var h=t.value;switch(a){case k.None:break;case k.Side:u.drawWheelSide(e,h);break;case k.Top:u.drawWheelTop(e,h)}}}catch(d){l.e(d)}finally{l.f()}}},{key:"drawPoints",value:function(e,t,n){var r=this.state.margin,i=e.strokeStyle;e.lineWidth=3,e.imageSmoothingEnabled=!0,e.strokeStyle=n,e.beginPath();for(var a=0;a<t.length-1;a++){var o=this.translate(this.samplePoint(t,a)),s=this.translate(this.samplePoint(t,a+1));e.moveTo(r+o.x,r+o.y),e.lineTo(r+s.x,r+s.y)}e.stroke(),e.strokeStyle=i}},{key:"drawSections",value:function(e){var t=this.state.margin,n=this.props,r=n.design,i=n.sectionMode;if(n.showSectionSelector&&i===O.Pick){var a=new T(r).existingIndexes;e.beginPath();var o,s=Object(S.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=this.translate(this.scalePoint({x:c,y:0})),l=this.translate(this.scalePoint({x:c,y:this.height}));e.moveTo(t+u.x,t+u.y),e.lineTo(t+l.x,t+l.y)}}catch(h){s.e(h)}finally{s.f()}e.stroke()}}},{key:"drawSignal",value:function(){var e=this.canvas;if(e){var t=e.getContext("2d");if(t){this.drawGrid(t);var n=this.props,r=n.contour,i=n.section,a=n.sectionBaseline,o=n.showSectionSelector,s=n.sectionMode;o&&s===O.Edit?(a&&this.drawPoints(t,a,"gray"),i&&this.drawPoints(t,i,"black")):this.drawPoints(t,r,"black"),this.drawWheels(t),this.drawSections(t)}}}},{key:"lerp",value:function(e,t,n){var r=n.x-t.x,i=(n.y-t.y)/r;w.Generate.inclusive(t.x,n.x).forEach((function(n,r){e[n].y=t.y+r*i}))}},{key:"reflect",value:function(e){return{x:2*((this.currentSamples.length-1)/2)-e.x,y:e.y}}},{key:"processPoints",value:function(e){var t=this.props,n=t.symmetrical,r=t.showSectionSelector,i=t.sectionMode,a=t.onSectionSelected;if(r&&i===O.Pick)a(r,e[e.length-1].x);else{var o,s=this.currentSamples,c=(s.length-1)/2,u=Object(S.a)(e);try{for(u.s();!(o=u.n()).done;){var l=o.value,h=this.lastPoint;h&&l.x!==h.x?n?N.a.between(c,h.x,l.x)||(this.lerp(s,h,l),this.lerp(s,this.reflect(l),this.reflect(h))):this.lerp(s,h,l):n?(s[l.x].y=l.y,s[this.reflect(l).x].y=l.y):s[l.x].y=l.y,this.lastPoint=l}}catch(d){u.e(d)}finally{u.f()}this.currentSamples=s}}},{key:"onWheelChange",value:function(e,t){var n=this.props,r=n.contour,i=n.wheels,a=n.onCountourChange;i&&(-1===t?this.setState({wheelIndex:i.length},(function(){a(r,[].concat(Object(l.a)(i),[e]))})):this.setState({wheelIndex:t},(function(){a(r,i.map((function(n,r){return r===t?e:n})))})))}},{key:"wheelDataFromPoint",value:function(e,t){var n=this.props.wheels,r=Math.sqrt(Math.pow(e.x-t.center.x,2)+Math.pow(e.y-t.center.y,2)),i=Math.sqrt(Math.pow(e.x-t.center.x,2)+Math.pow(e.y-(t.center.y+t.wheelRadius),2)),a=N.a.pythBP(e.x-t.center.x,e.y-2*t.offset),o=N.a.pythBP(e.x-t.center.x,e.y-2*(t.offset+t.width));return{wheel:t,wheelIndex:(n||[]).indexOf(t),distToCenter:r,distToRadiusHandler:i,distToOffsetHandler:a,distToWidthHandler:o}}},{key:"wheelIndexFromPoint",value:function(e){var t=this.props.wheels,n=this.state.wheelIndex;if(t&&t[n])return this.wheelDataFromPoint(e,t[n]);var r,i=Object(S.a)(t||[]);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this.wheelDataFromPoint(e,a);if([o.distToCenter,o.distToRadiusHandler,o.distToOffsetHandler,o.distToWidthHandler].some((function(e){return e<2})))return o}}catch(s){i.e(s)}finally{i.f()}return{wheel:null,wheelIndex:-1,distToCenter:0,distToRadiusHandler:0,distToOffsetHandler:0,distToWidthHandler:0}}},{key:"fromCanvasCoordinates",value:function(e,t){var n=this.props,r=n.contour,i=n.maxY,a=this.state,o=a.scale,s=a.margin;if(!e)return{x:0,y:0};var c=e.getBoundingClientRect(),u=this.translate({x:t.clientX-c.left-s,y:0});return u.x=N.a.withinRange(Math.round(u.x/o),0,r.length-1),u.y=N.a.withinRange(u.y/o,0,i),u}},{key:"setPosition",value:function(e){var t=this,n=this.props,r=n.contour,i=n.maxY,a=n.mode,o=n.wheelDrawing,s=this.state,c=s.scale,u=s.margin,l=s.wheelMode;if(this.canvas){e.stopPropagation(),e.preventDefault();var d=this.canvas.getBoundingClientRect(),f=this.translate({x:e.clientX-d.left-u,y:e.clientY-d.top-u});f.x=N.a.withinRange(Math.round(f.x/c),0,r.length-1),f.y=N.a.withinRange(f.y/c,0,i);var p,v=this.wheelIndexFromPoint(f),m=v.wheel,g=v.wheelIndex,y=v.distToCenter,b=v.distToRadiusHandler,w=v.distToOffsetHandler,S=v.distToWidthHandler;if(a!==x.Contour){if(a===x.Wheel||a===x.Contour&&m){if(!this.props.wheels)return;if(m)switch(o){case k.Side:f.x=N.a.withinRange(f.x,m.wheelRadius,r.length-1-m.wheelRadius),f.y=N.a.withinRange(f.y,0,i-m.wheelRadius);break;case k.Top:f.x=N.a.withinRange(f.x,m.wheelRadius,r.length-1-m.wheelRadius),f.y=N.a.withinRange(f.y,0,i)}switch(l){case z.MoveCenter:m&&this.onWheelChange(Object(h.a)(Object(h.a)({},m),{},{center:f}),g);break;case z.ChangeRadius:m&&this.onWheelChange(Object(h.a)(Object(h.a)({},m),{},{arcRadius:y,wheelRadius:y}),g);break;case z.ChangeOffset:m&&this.onWheelChange(Object(h.a)(Object(h.a)({},m),{},{offset:f.y/2}),g);break;case z.ChangeWidth:m&&this.onWheelChange(Object(h.a)(Object(h.a)({},m),{},{width:f.y/2-m.offset}),g);break;case z.Create:switch(o){case k.Side:if(m){if(y<2)return void this.setState({wheelMode:z.MoveCenter});if(b<3)return void this.setState({wheelMode:z.ChangeRadius})}break;case k.Top:if(m){if(w<2)return void this.setState({wheelMode:z.ChangeOffset});if(S<3)return void this.setState({wheelMode:z.ChangeWidth})}}this.setState({wheelMode:z.ChangeRadius},(function(){t.onWheelChange({center:f,arcRadius:0,wheelRadius:0,offset:10,width:10},g)}))}}}else null===(p=this.buffer)||void 0===p||p.next(f)}}},{key:"renderSectionSelector",value:function(){var e=this.props,t=e.sectionMode,n=e.onSectionChanged,r=e.onSectionSelected,i=e.sections,a=e.sectionIndex,o=e.showSectionSelector;if(t!==O.Edit)return null;if(!n)return null;if(!o)return null;var c=function(e){r(o,e)},u=i-1;return s.a.createElement("div",{className:"section-selector"},s.a.createElement("input",{type:"range",min:0,max:u,value:a,onChange:function(e){return c(parseInt(e.target.value))}}),s.a.createElement("input",{type:"number",value:a,min:0,max:u,onChange:function(e){return c(parseInt(e.target.value))}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.contour,r=t.maxY,i=this.state,a=i.scale,o=i.margin;if(!a)return null;var c=n.length*a+2*o,u=r*a+2*o;return s.a.createElement("div",null,s.a.createElement("div",null,this.renderSectionSelector(),s.a.createElement("canvas",{width:c,height:u,className:"drawing-canvas",onDoubleClick:function(e){e.stopPropagation(),e.preventDefault()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault()},onPointerEnter:function(e){e.preventDefault(),e.stopPropagation()},onPointerLeave:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDisconnected()},onPointerDown:function(t){1===t.buttons&&(e.enabled=!0,e.lastPoint=null,e.setPosition(t),t.preventDefault(),t.stopPropagation())},onPointerUp:function(t){e.mouseDisconnected(),t.preventDefault(),t.stopPropagation()},onPointerMove:function(t){e.enabled&&(e.setPosition(t),t.preventDefault(),t.stopPropagation())},onPointerCancel:function(e){e.preventDefault(),e.stopPropagation()},onMouseDown:function(t){1===t.buttons&&(e.enabled=!0,e.lastPoint=null,e.setPosition(t),t.preventDefault(),t.stopPropagation())},onMouseMove:function(t){e.enabled&&(e.setPosition(t),t.preventDefault(),t.stopPropagation())},onMouseUp:function(t){e.mouseDisconnected(),t.stopPropagation(),t.preventDefault()},ref:function(t){e.canvas=t,e.drawSignal()}})))}},{key:"currentSamples",get:function(){var e=this.props,t=e.contour,n=e.section,r=e.sectionBaseline,i=n||r;return(e.showSectionSelector&&i?i:t).map((function(e){return Object(h.a)({},e)}))},set:function(e){var t=this.props,n=t.wheels,r=t.showSectionSelector,i=t.sectionIndex,a=t.onCountourChange,o=t.onSectionChanged;r?o([i],e):a(e,n)}},{key:"width",get:function(){var e=this.props.contour,t=this.state.scale;return(e.length-1)*t}},{key:"height",get:function(){return this.props.maxY*this.state.scale}}]),n}(o.Component),L=n(33),I=n(32),G=n(116),B=function(){function e(){Object(d.a)(this,e),this._stream=void 0,this._stream=new G.a({designStore:this,storageModel:this.defaultStorageModel(),design:null})}return Object(f.a)(e,[{key:"initializeFromStorage",value:function(){this.updateDesign(null)}},{key:"subscribe",value:function(e){this._stream.subscribe(e)}},{key:"defaultStorageModel",value:function(){return{version:1,designs:[this.newDesing("Default")]}}},{key:"migrate",value:function(e){e.designs.forEach((function(e){e.wheels||(e.wheels=[]),e.wheels.forEach((function(e){e.offset||(e.offset=10),e.width||(e.width=10)})),e.frontSegments||(e.frontSegments=[]),void 0===e.colorWheels&&(e.colorWheels=2105376)}))}},{key:"loadFromLocalStorage",value:function(){var e=localStorage.getItem("Designs");if(!e)return this.defaultStorageModel();var t=JSON.parse(e);return this.migrate(t),t}},{key:"saveStorageModel",value:function(e){if(e){var t=JSON.stringify(e);localStorage.setItem("Designs",t)}}},{key:"saveToLocalStorage",value:function(e,t){if(e){var n=this.loadFromLocalStorage();n.designs=n.designs.map((function(n){return n.name===e.name?(null===t||void 0===t||t(e),e):n})),n.designs.includes(e)||n.designs.push(e),this.saveStorageModel(n)}}},{key:"deleteDesign",value:function(e){if(e){var t=this.loadFromLocalStorage();t.designs=t.designs.filter((function(t){return t.name!==e.name})),this.saveStorageModel(t),this.updateDesign(null)}}},{key:"updateDesign",value:function(e,t){e&&this.saveToLocalStorage(e,t),this.setActiveDesign(e)}},{key:"setActiveDesign",value:function(e){var t=this.loadFromLocalStorage(),n={designStore:this,storageModel:t,design:t.designs.find((function(t){return t.name===(null===e||void 0===e?void 0:e.name)}))||t.designs[0]};this._stream.next(n)}},{key:"newDesing",value:function(e){var t={x:101,y:41,z:31},n=w.Generate.range(0,t.x).map((function(e){return{x:e,y:t.z}})),r=w.Generate.range(0,t.y).map((function(e){return{x:e,y:t.z}})),i=w.Generate.range(0,t.x).map((function(e){return{x:e,y:t.y}}));return{name:e,boxSize:t,sidePoints:n,frontPoints:r,topPoints:i,colorOdd:15432969,colorEven:0,colorWheels:2105376,wheels:[],frontSegments:[]}}},{key:"resetAll",value:function(){this.saveStorageModel(this.defaultStorageModel()),this.setActiveDesign(null)}},{key:"replaceStorageModel",value:function(e){this.migrate(e),this.saveStorageModel(null!==e&&void 0!==e?e:this.defaultStorageModel()),this.setActiveDesign(null)}},{key:"appendStorageModel",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,n=this._stream.value.storageModel;n&&(this.migrate(n),(t=n.designs).push.apply(t,Object(l.a)(e.designs)),this.replaceStorageModel(n))}))},{key:"hasStoredDesigns",get:function(){return null!==localStorage.getItem("Designs")}},{key:"state",get:function(){return this._stream.value}}]),e}(),U=n(8),H=n.n(U),_=n(12),Y=n(55),V=(n(94),function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"section",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return s.a.createElement("div",{className:"tutorial-section"},s.a.createElement("header",null,e),t,n&&s.a.createElement("img",{alt:"meaningful text",src:"tutorial/".concat(n,".gif")}))}},{key:"textSection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.section(e,t?s.a.createElement("p",null,t):null,n)}},{key:"render",value:function(){var e=this.props,t=e.mainToolbarItems,n=e.sideEditorToolbar;return s.a.createElement("div",{className:"tutorial"},this.section("Main Toolbar",s.a.createElement(Y.ToolbarLegend,{items:t,dialogFactory:null})),this.section("Side Editor Toolbar",s.a.createElement(Y.ToolbarLegend,{items:n,dialogFactory:null})),this.textSection("Front view","Draw front view of car body, then smooth contour","car_front"),this.textSection("Top view","Draw top view of car body, then smooth contour","car_top"),this.textSection("Side view","Draw side view of car body, then smooth contour","car_side"),this.textSection("Add wheels","","car_wheels"),this.textSection("Front section","Draw front sections view of car body, then smooth contour","car_sections"),this.textSection("3D View","","car_fly_by"))}}]),n}(s.a.Component)),q=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"MainToolbar",value:function(e,t,n){var r=this,i=function(){return e()},a=function(){return t()},o=[{icon:"FcViewDetails",title:"Legend",action:function(){return I.a.Modal("Main Toolbar",o)}},{icon:"FaUniversity",title:"Tutorials",action:function(){return r.tutorials(o)}},{isSeparator:!0},{icon:"GrPowerReset",title:"Reset All",action:function(){return i().resetAll()}},{icon:"GrFavorite",title:"Load sample designs",action:function(){return i().loadSampleDesigns()}},{isSeparator:!0},{icon:"VscNewFile",title:"New Design",action:function(){return i().newDesign()}},{icon:"FiDownload",title:"Download designs",action:function(){return i().downloadDesigns()}},{icon:"FiUpload",title:"Upload designs",action:function(){return i().uploadDesigns()}},{isSeparator:!0},{icon:"GrClone",title:"Clone Design",action:function(){return i().cloneDesign()}},{icon:"AiOutlineSetting",title:"Design Settings",action:function(){return i().settings()}},{icon:"AiOutlineExport",title:"Export Design to STL",action:function(){return i().exportSTL()}},{icon:"AiOutlineCloseCircle",title:"Delete Design",action:function(){return i().deleteDesign()}},{isSeparator:!0},{icon:"GiWireframeGlobe",title:"Wireframes",selected:function(){return a().wireframes},action:function(){return n({wireframes:!a().wireframes})}},{icon:"CgEditShadows",title:"Flat Shading",selected:function(){return a().flatShading},action:function(){return n({flatShading:!a().flatShading})}},{icon:"GiFlatPlatform",title:"Ground plane",selected:function(){return a().ground},action:function(){return n({ground:!a().ground})}},{icon:"CgSmartHomeLight",title:"Light orbiting",selected:function(){return a().lightOrbit},action:function(){return n({lightOrbit:!a().lightOrbit})}},{icon:"GiCartwheel",title:"Render Wheels",selected:function(){return a().renderWheels},action:function(){return n({renderWheels:!a().renderWheels})}},{isSeparator:!0},{icon:"AiOutlineGithub",title:"GitHub - Project Repository",action:function(){window.open("https://github.com/EvgenyMuryshkin/CarBodyDesigner")}},{icon:"AiOutlineTwitter",title:"Twitter - Evgeny Muryshkin",action:function(){window.open("https://twitter.com/ITMayWorkDev")}},{icon:"BiChip",title:"QuSoC - FPGA design toolkit",action:function(){window.open("https://github.com/EvgenyMuryshkin/qusoc")}}];return o}},{key:"tutorials",value:function(){var e=Object(_.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.SideEditorToolbar({sectionMode:O.Edit,mode:x.Contour,showSectionSelector:!1,hasWheels:!1,currentSection:0,sectionParams:{}},null),e.next=3,L.a.Modal({title:"How to create a car model",icon:"FaUniversity",body:s.a.createElement(V,{mainToolbarItems:t,sideEditorToolbar:n}),buttonsFactory:L.a.CloseButtons});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"SideEditorToolbar",value:function(e,t){var n=e.mode,r=e.hasWheels,i=e.sectionParams,a=e.showSectionSelector,o=e.currentSection,s=[{icon:"FcViewDetails",title:"Legend",action:function(){return I.a.Modal("Main Toolbar",s)}},{icon:"AiOutlineFullscreen",title:"Fullscreen edit",action:function(){var e=Object(_.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.fullscreenEdit();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{isSeparator:!0},{icon:"ImPencil2",title:"Draw countour",selected:function(){return n===x.Contour},action:function(){return null===t||void 0===t?void 0:t.setDrawingMode(x.Contour)}},{icon:"GiCartwheel",title:"Draw wheel",selected:function(){return n===x.Wheel},hidden:function(){return!r},action:function(){return null===t||void 0===t?void 0:t.setDrawingMode(x.Wheel)},iconParams:{readOnly:a}},{isSeparator:!0},{icon:"ImMoveUp",title:"Move Up",action:function(){return null===t||void 0===t?void 0:t.moveUp()}},{icon:"ImMoveDown",title:"Move Down",action:function(){return null===t||void 0===t?void 0:t.moveDown()}},{icon:"AiOutlineBorderTop",title:"All Up",action:function(){return null===t||void 0===t?void 0:t.allUp()}},{icon:"AiOutlineBorderBottom",title:"All Down",action:function(){return null===t||void 0===t?void 0:t.allDown()}},{icon:"GiWhiplash",title:"Smooth",action:function(){return null===t||void 0===t?void 0:t.smooth()}},{isSeparator:!0},{icon:"GiSlicedBread",title:"Slice Edit",selected:function(){return a},action:function(){return null===t||void 0===t?void 0:t.onSectionSelected(!a,o)}},{icon:"AiFillLock",title:"Lock section",iconParams:i,action:function(){return null===t||void 0===t?void 0:t.lockSection()}},{icon:"RiDeleteBack2Line",title:"Revert section",iconParams:i,action:function(){return null===t||void 0===t?void 0:t.removeSection()}},{icon:"TiArrowForwardOutline",title:"Apply to remaining sections",iconParams:i,action:function(){return null===t||void 0===t?void 0:t.applyToRemaining()}}];return s}}]),e}(),J=n(21),X=(n(62),function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e))._container=null,r.state={contour:[],wheels:null},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.contour,n=e.wheels;this.setState({contour:t.map((function(e){return{x:e.x,y:e.y}})),wheels:n?n.map((function(e){return w.Tools.clone(e)})):null})}},{key:"render",value:function(){var e,t,n,r,i,a,s=this,c=this.props,u=c.id,l=c.title,h=c.symmetrical,d=c.maxY,f=c.onCountourChange,p=c.wheelDrawing,v=c.sections,m=c.onSectionSelected,g=c.onSectionChanged,y=c.section,b=c.sectionBaseline,w=c.showSectionSelector,S=c.currentSection,x=c.design,k=c.sectionMode,O=this.state,C=O.contour,j=O.wheels,E=.9*(null!==(e=null===(t=this._container)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:0),M=.9*(null!==(n=null===(r=this._container)||void 0===r?void 0:r.clientHeight)&&void 0!==n?n:0);return o.createElement("div",{className:"modal-side-editor",ref:function(e){return s._container=e}},"(",null===(i=this._container)||void 0===i?void 0:i.clientWidth,"x",null===(a=this._container)||void 0===a?void 0:a.clientHeight,")",E&&M?o.createElement(K,{id:"".concat(u,"_modal"),title:l,symmetrical:h,width:E,height:M,contour:C,maxY:d,onCountourChange:function(e,t){s.setState({contour:e,wheels:t},(function(){return f(s.state.contour,s.state.wheels)}))},wheels:j,wheelDrawing:p,sections:v,sectionBaseline:b,onSectionChanged:g,onSectionSelected:m,section:y,showSectionSelector:w,currentSection:S,design:x,sectionMode:k}):null)}}]),n}(o.Component)),K=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={mode:x.Contour},r}return Object(f.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.showSectionSelector&&this.state.mode!==x.Contour&&this.setState({mode:x.Contour})}},{key:"moveUp",value:function(){var e=this.props.maxY,t=this.currentSamples;t.some((function(t){return t.y>e-1}))||(t.forEach((function(e){return e.y++})),this.currentSamples=t)}},{key:"moveDown",value:function(){var e=this.currentSamples;e.some((function(e){return e.y<1}))||(e.forEach((function(e){return e.y--})),this.currentSamples=e)}},{key:"allUp",value:function(){var e=this.props.maxY,t=this.currentSamples;t.forEach((function(t){return t.y=e})),this.currentSamples=t}},{key:"allDown",value:function(){var e=this.currentSamples;e.forEach((function(e){return e.y=0})),this.currentSamples=e}},{key:"fullscreenEdit",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,i,a,s,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.title,r=t.contour,i=t.wheels,a=t.onCountourChange,s=r,c=i,e.next=5,J.a.Modal({title:n,body:o.createElement(X,Object.assign({},this.props,{onCountourChange:function(e,t){s=e,c=t}})),buttonsFactory:J.a.OKCancelButtons});case 5:if(!e.sent){e.next=7;break}a(s,c);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"smooth",value:function(){var e=this.currentSamples,t=this.currentSamples.map((function(t,n){return 0===n||n===e.length-1?t:{x:t.x,y:(e[n-1].y+e[n].y+e[n+1].y)/3}}));this.currentSamples=t}},{key:"applyToRemaining",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,i,a,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.showSectionSelector,r=t.currentSection,i=t.sections,a=t.onSectionChanged,n){e.next=5;break}return e.next=4,J.a.Notification("Section editor is disabled");case 4:return e.abrupt("return");case 5:return e.next=7,J.a.Confirm("Apply current contour to the rest of the model?");case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:o=this.currentSamples,a(w.Generate.inclusive(r,i),o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeSection",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.currentSection,r=t.onSectionChanged,e.next=3,J.a.Confirm("Revert current section to baseline?");case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:r([n],null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lockSection",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.currentSection,r=t.sectionBaseline,i=t.onSectionChanged,e.next=3,J.a.Confirm("Lock current section to baseline?");case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:i([n],r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"interpolateSections",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.props.onInterpolateSections)||void 0===t||t();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDrawingMode",value:function(e){this.setState({mode:e})}},{key:"onSectionSelected",value:function(e,t){var n=this.props.onSectionSelected;n(e,t)}},{key:"renderMenu",value:function(){var e=this.props,t=e.showSectionSelector,n=e.currentSection,r=e.wheels,i=e.sectionMode,a=this.state.mode,s={bordered:!0},c=i===O.Edit,u=Object(h.a)(Object(h.a)({},s),{},{readOnly:!t||!c,readOnlyTitle:(t?!c&&"Use front view to edit sections":"Turn on section editor")||""}),l=(new q).SideEditorToolbar({hasWheels:!r,mode:a,sectionMode:i,showSectionSelector:t,currentSection:n,sectionParams:u},this);return o.createElement(I.a,{className:"menu menu-top",items:l,iconParams:s})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.title,r=e.width,i=e.height,a=e.maxY,s=e.symmetrical,c=e.contour,u=e.onCountourChange,l=e.wheels,h=e.wheelDrawing,d=e.sections,f=e.section,p=e.sectionBaseline,v=e.onSectionChanged,m=e.onSectionSelected,g=e.showSectionSelector,y=e.currentSection,b=e.design,w=e.sectionMode,S=this.state.mode,x=[n,null!==y?"@".concat(y):null];return o.createElement("div",{className:"side-editor"},this.renderMenu(),o.createElement("div",{className:"side-drawing-container"},x.filter(Boolean).join(","),o.createElement(F,{id:t,symmetrical:s,width:r,height:i,contour:c,maxY:a,mode:S,onCountourChange:u,wheels:l,wheelDrawing:h,sections:d,onSectionChanged:v,showSectionSelector:g,section:f,sectionBaseline:p,onSectionSelected:function(e,t){m(g,t)},sectionIndex:y,design:b,sectionMode:w})))}},{key:"currentSamples",get:function(){var e=this.props,t=e.contour,n=e.section,r=e.sectionBaseline,i=n||r;return(e.showSectionSelector&&i?i:t).map((function(e){return Object(h.a)({},e)}))},set:function(e){var t=this.props,n=t.wheels,r=t.currentSection,i=t.showSectionSelector,a=t.onCountourChange,o=t.onSectionChanged;i?o([r],e):a(e,n)}}]),n}(o.Component),Z=n(77),Q=n(78),$=n(79),ee=n.n($),te=function(){function e(t,n){Object(d.a)(this,e),this.designStoreState=t,this.renderSettings=n}return Object(f.a)(e,[{key:"exportText",value:function(e,t,n){var r=new Blob([e],{type:t});this.exportBlob(r,n)}},{key:"exportBlob",value:function(e,t){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=URL.createObjectURL(e),n.download=t,n.click(),n.remove()}},{key:"exportSTL",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,a,o,s,c,u,h,d,f,p,v,m,y,b,w,S;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.renderSettings.renderWheels,n=this.designStoreState.design){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,L.b.Modal("Export to STL",{stringName:"".concat(n.name,".stl"),intXRotationDeg:90,intYRotationDeg:0,intZRotationDeg:0});case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return");case 9:a=n.boxSize,o=n.topPoints,s=n.frontPoints,c=n.sidePoints,u=n.wheels,h=new Z.a,d=new E(a.x,a.y,a.z,i.All),f=new T(n),p=f.interpolateSections(),d.applyContour(c,s,o,u,p),v=d.geometry,t&&(m=new W(a.x,a.y,a.z),v.push.apply(v,Object(l.a)(m.geometry(u)))),(y=Object(Q.a)(v)).rotateX(g.m.degToRad(r.intXRotationDeg)),y.rotateY(g.m.degToRad(r.intYRotationDeg)),y.rotateZ(g.m.degToRad(r.intXRotationDeg)),b=new g.o({color:16776960}),w=new g.n(y,b),S=h.parse(w),this.exportText(S,"text/plain",r.stringName||"test.stl");case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSampleDesigns",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.Confirm("Load sample designs?");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=this.designStoreState.designStore,e.next=7,ee.a.get("SampleDesigns.json");case 7:n=e.sent,t.replaceStorageModel(n.data);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadDesigns",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.designStoreState.storageModel,e.next=3,L.b.Modal("Download designs",{stringName:"CarBodyDesigns.json"});case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:r=JSON.stringify(t,null,2),this.exportText(r,"application/json",n.stringName||"CarBodyDesigns.json");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadDesigns",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.b.Modal("Upload designs",{flagAppendToExisting:!1});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=this.designStoreState.designStore,(r=document.createElement("input")).setAttribute("type","file"),r.setAttribute("accept","application/json"),r.onchange=function(){var e,i=null===r||void 0===r||null===(e=r.files)||void 0===e?void 0:e[0];if(i){var a=new FileReader;a.onload=function(){var e=Object(_.a)(H.a.mark((function e(r){var i,a,o,s;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===r||void 0===r||null===(i=r.target)||void 0===i?void 0:i.result)){e.next=7;break}if((s=JSON.parse(null===r||void 0===r||null===(a=r.target)||void 0===a||null===(o=a.result)||void 0===o?void 0:o.toString())).version){e.next=6;break}return e.next=5,L.a.Notification("Provided file is not a designs model");case 5:return e.abrupt("return");case 6:t.flagAppendToExisting?n.appendStorageModel(s):n.replaceStorageModel(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(i)}},document.body.appendChild(r),r.click(),r.remove();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetAll",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.designStoreState.designStore,e.next=3,L.a.Confirm("Reset all designs?");case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.resetAll();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newDesign",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.designStoreState.designStore,n=new Date,e.next=4,L.b.Modal("New Design",{stringName:"".concat(n.toLocaleDateString()," - ").concat(n.toLocaleTimeString())});case 4:(r=e.sent)&&(i=t.newDesing(r.stringName),t.updateDesign(i));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cloneDesign",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,i,a,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState,n=t.design,r=t.designStore,n){e.next=3;break}return e.abrupt("return");case 3:return i=new Date,e.next=6,L.b.Modal("Clone Design",{stringName:"".concat(n.name," - ").concat(i.toLocaleDateString()," - ").concat(i.toLocaleTimeString())});case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return");case 9:(o=N.a.clone(n)).name=a.stringName,r.updateDesign(o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDesign",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState,n=t.design,r=t.designStore,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,L.a.Confirm("Delete ".concat(n.name));case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:r.deleteDesign(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"settings",value:function(){var e=Object(_.a)(H.a.mark((function e(){var t,n,r,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState,n=t.design,r=t.designStore,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,L.b.Modal(n.name,{stringName:n.name,colorOdd:n.colorOdd,colorEven:n.colorEven,colorWheels:n.colorWheels});case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:r.updateDesign(n,(function(e){e.name=i.stringName,e.colorOdd=i.colorOdd,e.colorEven=i.colorEven,e.colorWheels=i.colorWheels}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ne=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"modify",value:function(e){var t=this.props,n=t.renderSettingsChanged,r=t.renderSettings;n(Object(h.a)(Object(h.a)({},r),e))}},{key:"toggleWireframes",value:function(){this.modify({wireframes:!this.props.renderSettings.wireframes})}},{key:"toggleFlatShading",value:function(){this.modify({flatShading:!this.props.renderSettings.flatShading})}},{key:"render",value:function(){var e=this,t=(new q).MainToolbar((function(){return e.dso}),(function(){return e.props.renderSettings}),(function(t){return e.modify(t)}));return s.a.createElement(I.a,{iconParams:{bordered:!0,size:"large"},items:t,className:"menu menu-top"})}},{key:"dso",get:function(){var e=this.props,t=e.designStoreState,n=e.renderSettings;return new te(t,n)}}]),n}(s.a.Component),re=n(80),ie=n.n(re),ae=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;Object(d.a)(this,n),(r=t.call(this,e))._updateStream=new M.a;var i=new B;return r.state={designStore:i,renderSettings:{wireframes:!1,flatShading:!1,ground:!0,lightOrbit:!0,renderWheels:!0},designStoreState:i.state,currentSectionData:{front:null,side:null,top:null},showSectionSelector:!1,currentSection:0},r._updateStream.pipe(Object(D.a)((function(){return Object(P.a)(500)}))).subscribe((function(){return r.forceUpdate()})),r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state,n=t.designStore,r=t.renderSettings;(n.subscribe((function(t){return e.setState({designStoreState:t})})),this.subscribeForResizeEvents(),window.ontouchstart=function(e){e.touches.length>1&&e.preventDefault()},n.hasStoredDesigns)?n.initializeFromStorage():(n.initializeFromStorage(),new te({designStore:n,design:null,storageModel:null},r).loadSampleDesigns())}},{key:"subscribeForResizeEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e._updateStream.next({})}))}},{key:"renderDesign",value:function(){var e=this,t=this.state,n=t.designStoreState,r=t.designStore,a=t.renderSettings,o=t.currentSectionData,c=t.showSectionSelector,u=t.currentSection,d=n.design;if(!d)return null;var f=d.boxSize,p=d.frontPoints,v=d.sidePoints,m=d.topPoints,g=d.wheels,y=d.frontSegments,b=function(e){var t=Object(h.a)(Object(h.a)({},d),e);r.updateDesign(t)};new E(f.x,f.y,f.z,i.All).applyContour(v,p,m,g,[]);var w=new j(p,y),S=y[o.front||0],x=S?w.query((o.front||0)-1):w.query(o.front||0),C=function(t,n){e.setState({currentSectionData:Object(h.a)(Object(h.a)({},o),{},{front:t?n:null}),showSectionSelector:t,currentSection:n})},M=window.innerHeight-100,D={width:window.innerWidth,height:M},P={height:M/2},T={width:window.innerWidth/2,height:M/2},W=Math.floor(window.innerWidth/2),N=Math.floor(M/2);return s.a.createElement("div",{className:"main-layout-div",style:D},s.a.createElement("div",{className:"main-layout-row",style:P},s.a.createElement("div",{className:"main-layout-cell",style:T},s.a.createElement(K,{id:"front",title:"Front (".concat(p.length,"x").concat(f.z,")"),symmetrical:!0,width:W,height:N,contour:p,maxY:f.z,onCountourChange:function(e){b({frontPoints:e})},wheels:null,wheelDrawing:k.None,sections:f.x,onSectionSelected:C,onSectionChanged:function(e,t){var n=Object(l.a)(d.frontSegments);e.forEach((function(r){r===e[0]&&null!==t?n[r]=t.map((function(e){return{x:e.x,y:e.y}})):delete n[r]})),b({frontSegments:n})},sectionBaseline:x,section:S,onInterpolateSections:function(){},showSectionSelector:c,currentSection:u,design:d,sectionMode:O.Edit})),s.a.createElement("div",{className:"main-layout-cell",style:T},s.a.createElement(K,{id:"top",title:"Top (".concat(m.length,"x").concat(f.y,")"),symmetrical:!1,width:W,height:N,contour:m,maxY:f.y,onCountourChange:function(e,t){b({topPoints:e,wheels:t||[]})},wheels:g,wheelDrawing:k.Top,sections:f.z,onSectionSelected:C,onSectionChanged:function(e,t){},section:null,sectionBaseline:null,showSectionSelector:c,currentSection:u,design:d,sectionMode:O.Pick}))),s.a.createElement("div",{className:"main-layout-row",style:P},s.a.createElement("div",{className:"main-layout-cell",style:T},s.a.createElement(K,{id:"side",title:"Side (".concat(v.length,"x").concat(f.z,")"),symmetrical:!1,width:W,height:N,contour:v,maxY:f.z,onCountourChange:function(e,t){b({sidePoints:e,wheels:t||[]})},wheels:g,wheelDrawing:k.Side,sections:f.y,onSectionSelected:C,onSectionChanged:function(e,t){},section:null,sectionBaseline:null,showSectionSelector:c,currentSection:u,design:d,sectionMode:O.Pick})),s.a.createElement("div",{className:"main-layout-cell",style:T},s.a.createElement(R,{width:W,height:N,design:d,renderSettings:a}))))}},{key:"renderDesignSelector",value:function(){var e=this.state,t=e.designStore,n=e.designStoreState,r=n.storageModel,i=n.design;return r?s.a.createElement("div",{className:"menu menu-top"},r.designs.map((function(e){var n={"design-selector":!0,"design-selector-active":e===i};return s.a.createElement("div",{key:e.name,className:w.Tools.classNames(n),onClick:function(){t.setActiveDesign(e)}},e.name)}))):null}},{key:"render",value:function(){var e=this,t=this.state,n=t.designStore,r=t.designStoreState,i=t.renderSettings;return s.a.createElement("div",{className:"App"},s.a.createElement("div",null,s.a.createElement("div",{className:"app-toolbars"},s.a.createElement(ne,{designStore:n,designStoreState:r,renderSettings:i,renderSettingsChanged:function(t){return e.setState({renderSettings:t})}}),this.renderDesignSelector()),this.renderDesign()),s.a.createElement(L.c,null),s.a.createElement(ie.a,null,"This website uses cookies to enhance the user experience."))}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(2),a=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"withinRange",value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e<r?r:e>i?i:e}},{key:"between",value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>r&&e<i}},{key:"betweenInclusive",value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}},{key:"classNames",value:function(e){return e?Object.keys(e).filter((function(t){return e[t]})).join(" "):""}},{key:"clone",value:function(e){var t=JSON.stringify(e);return JSON.parse(t)}},{key:"pythHB",value:function(e,t){return Math.sqrt(e*e-t*t)}},{key:"pythBP",value:function(e,t){return Math.sqrt(e*e+t*t)}}]),e}()},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(15),i=n(8),a=n.n(i),o=n(12),s=n(1),c=n(2),u=n(5),l=n(51),h=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"OKCancelButtons",value:function(e){return[{label:"OK",onClick:function(){return e(!0)}},{label:"Cancel",onClick:function(){return e(!1)}}]}},{key:"CloseButtons",value:function(e){return[{label:"Close",onClick:function(){return e(!1)}}]}},{key:"Add",value:function(t){e.DialogsStream.next({add:[t],remove:[]})}},{key:"Remove",value:function(t){e.DialogsStream.next({add:[],remove:[t]})}},{key:"Confirm",value:function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Modal({title:n,icon:"AiOutlineWarning",body:null,buttonsFactory:function(e){return[{label:"OK",onClick:function(){return e(!0)}},{label:"Cancel",onClick:function(){return e(!1)}}]}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"Notification",value:function(){var t=Object(o.a)(a.a.mark((function t(n){var i,o,s=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:null,o=s.length>2&&void 0!==s[2]?s[2]:{},t.next=4,e.Modal(Object(r.a)({title:n,icon:"AiOutlineWarning",body:i,buttonsFactory:function(e){return[{label:"Cancel",onClick:function(){return e(!1)}}]}},o||{}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"Modal",value:function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var i,a=n.buttonsFactory((function(n){t(n),e.Remove(o)})).map((function(e){return u.createElement("div",{key:e.label,className:"modal-button",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.onClick()}},e.label)})),o={title:n.title,icon:n.icon,body:n.body,footer:u.createElement("div",null,a)};null===(i=n.genericDialogCallback)||void 0===i||i.call(n,o),e.Add(o)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();h.DialogsStream=new l.a},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return k}));var r=n(11),i=n(1),a=n(2),o=n(3),s=n(4),c=n(5),u=n(52),l=n(30),h=n(49),d=n(72),f=n(22),p=n(50),v=n(73),m=n(53),g=n(74),y=n(54),b=n(75),w=n(76),S=n(9),x=(n(89),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getIcon",value:function(){var e=this.props,t=e.type,n=e.title,i=void 0===n?"":n,a=e.readOnlyTitle,o=e.bordered,s=void 0!==o&&o,x=e.readOnly,k=void 0!==x&&x,O=e.hidden,C=void 0!==O&&O,j=e.className,E=e.selected,M=void 0!==E&&E,D=e.size,P=void 0===D?"medium":D,T=e.onClick,W=Object(r.a)({icon:!0,"icon-selected":M,"icon-bordered":s,"icon-readonly":k,"icon-hidden":C},"icon-".concat(P),!0);j&&(W[j]=!0);var R={title:k?i+(a?" (".concat(a,")"):""):i,className:S.Tools.classNames(W),onClick:function(){k||null===T||void 0===T||T()}};switch(t){case"CgEditShadows":return c.createElement(u.a,R);case"GiWireframeGlobe":return c.createElement(l.e,R);case"GrPowerReset":return c.createElement(h.c,R);case"VscNewFile":return c.createElement(d.a,R);case"AiOutlineInfoCircle":return c.createElement(f.j,R);case"AiOutlineCloseCircle":return c.createElement(f.d,R);case"AiOutlineWarning":return c.createElement(f.m,R);case"GrClone":return c.createElement(h.a,R);case"ImMoveUp":return c.createElement(p.b,R);case"ImMoveDown":return c.createElement(p.a,R);case"AiOutlineBorderTop":return c.createElement(f.c,R);case"AiOutlineBorderBottom":return c.createElement(f.b,R);case"AiOutlineFullscreen":return c.createElement(f.g,R);case"AiOutlineSetting":return c.createElement(f.k,R);case"AiOutlineExport":return c.createElement(f.e,R);case"GiWhiplash":return c.createElement(l.d,R);case"ImPencil2":return c.createElement(p.c,R);case"GiCartwheel":return c.createElement(l.a,R);case"GiSlicedBread":return c.createElement(l.c,R);case"AiOutlineTwitter":return c.createElement(f.l,R);case"AiOutlineGithub":return c.createElement(f.i,R);case"AiOutlineFastForward":return c.createElement(f.f,R);case"TiArrowForwardOutline":return c.createElement(v.a,R);case"BiChip":return c.createElement(m.a,R);case"RiDeleteBack2Line":return c.createElement(g.a,R);case"AiFillLock":return c.createElement(f.a,R);case"AiOutlineFunction":return c.createElement(f.h,R);case"FiUpload":return c.createElement(y.b,R);case"FiDownload":return c.createElement(y.a,R);case"BiHelpCircle":return c.createElement(m.b,R);case"GrFavorite":return c.createElement(h.b,R);case"FaUniversity":return c.createElement(b.a,R);case"FcViewDetails":return c.createElement(w.a,R);case"GiFlatPlatform":return c.createElement(l.b,R);case"CgSmartHomeLight":return c.createElement(u.b,R);default:return null}}},{key:"render",value:function(){return c.createElement("div",{className:"icon-container"},this.getIcon())}}]),n}(c.Component)),k=function(e){var t=e.size,n=e.className,i=Object(r.a)({"icon-separator":!0},"icon-".concat(t),!0);return n&&(i[n]=!0),c.createElement("div",{className:"icon-container"},c.createElement("div",{className:S.Tools.classNames(i)},"\xa0"))}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(8),i=n.n(r),a=n(12),o=n(1),s=n(2),c=n(3),u=n(4),l=n(5),h=n.n(l),d=n(25),f=n(33),p=n(42),v=(n(93),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.items,r=e.iconParams,i={size:r.size},a=n.map((function(e,t){var n;return e.isSeparator?h.a.createElement(d.b,Object.assign({key:t},i)):h.a.createElement(d.a,Object.assign({key:t},r,{type:e.icon,title:e.title,selected:null===(n=e.selected)||void 0===n?void 0:n.call(e),onClick:e.action},e.iconParams||{}))}));return h.a.createElement("div",{className:t},a)}}],[{key:"Modal",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,f.a.Notification(t,h.a.createElement(p.a,{items:n,dialogFactory:function(){return r}}),{genericDialogCallback:function(e){return r=e}});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(h.a.Component))},33:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h.a}));var r=n(14),i=n(1),a=n(2),o=n(3),s=n(4),c=n(5),u=n(43),l=n(25),h=n(21),d=(n(91),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).internalDialogs=[],r.state={dialogs:[]},r}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;h.a.DialogsStream.subscribe((function(t){var n=[].concat(Object(r.a)(e.internalDialogs.filter((function(e){return!t.remove.includes(e)}))),Object(r.a)(t.add));e.setState({dialogs:n})}))}},{key:"render",value:function(){var e=this.state.dialogs,t=e.length?c.createElement("div",{className:"modal-backdrop"}):null,n=e.map((function(e,t){var n=e.title,r=e.icon,i=e.body,a=e.footer;return c.createElement("div",{key:t,className:"modal-dialog"},c.createElement("div",{className:"modal-header"},r&&c.createElement("div",{className:"modal-header-icon"},c.createElement(l.a,{type:r,size:"small"})),c.createElement("div",{className:"modal-header-title"},n)),i&&c.createElement("div",{className:"modal-body"},i),a&&c.createElement("div",{className:"modal-footer"},a))})),r=n.length?c.createElement("div",{className:"modal-container"},n):null,i=c.createElement("div",{className:"modal"},t,r);return Object(u.createPortal)(i,document.body,"modals")}}]),n}(c.Component)),f=n(8),p=n.n(f),v=n(12),m=n(11),g=(n(92),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={model:e.model},r}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props.modified,n=this.state.model;if(!n)return null;var r=Object.keys(n).map((function(r){var i=r.split("").findIndex((function(e){return e.toUpperCase()===e}));if(i<=0)return c.createElement("div",{key:r},"Component type cannot be inferred: ",r);var a=r.substring(i).split("").map((function(e,t){return 0===t?e:e===e.toUpperCase()?" ".concat(e):e})).join(""),o=function(e){return c.createElement("div",{key:r},c.createElement("div",{className:"form-label"},a),c.createElement("div",{className:"form-control-container"},e))},s=function(i){var a=Object.assign({},n,Object(m.a)({},r,i));e.setState({model:a},(function(){return t(e.state.model)}))},u=r.substring(0,i);switch(u){case"flag":return o(c.createElement("input",{className:"form-control",type:"checkbox",checked:!!n[r],onChange:function(e){return s(e.target.checked)}}));case"int":return o(c.createElement("input",{className:"form-control",type:"number",value:n[r],onChange:function(e){return s(parseInt(e.target.value||"0"))}}));case"string":return o(c.createElement("input",{className:"form-control",type:"string",value:n[r],onChange:function(e){return s(e.target.value||"")}}));case"color":var l;return o(c.createElement("input",{className:"form-control",type:"color",value:"#".concat((null!==(l=n[r])&&void 0!==l?l:0).toString(16).padStart(6,"0")),onChange:function(e){var t;s(parseInt((null!==(t=e.target.value)&&void 0!==t?t:"#000000").substring(1),16))}}));default:return o(c.createElement("div",null,"Unsupported field type: ",u))}}));return c.createElement("form",{className:"form"},r)}}]),n}(c.Component)),y=function(){function e(){Object(i.a)(this,e)}return Object(a.a)(e,null,[{key:"Modal",value:function(){var e=Object(v.a)(p.a.mark((function e(t,n){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",n);case 2:return r=n,i=c.createElement(g,{model:n,modified:function(e){return r=e}}),e.next=6,h.a.Modal({title:t,icon:"AiOutlineInfoCircle",body:i,buttonsFactory:h.a.OKCancelButtons});case 6:if(e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5),c=n.n(s),u=n(25),l=n(33),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.dialogFactory,r=t.map((function(e,t){var r;return e.isSeparator?c.a.createElement("tr",{key:t},c.a.createElement("td",{colSpan:2,className:"toolbar-legend-separator"})):c.a.createElement("tr",{key:t},c.a.createElement("td",{className:"toolbar-legend-icon"},c.a.createElement(u.a,{type:e.icon,selected:null===(r=e.selected)||void 0===r?void 0:r.call(e),onClick:function(){var t,r=null===n||void 0===n?void 0:n();r&&(l.a.Remove(r),null===(t=e.action)||void 0===t||t.call(e))}})),c.a.createElement("td",null,e.title))}));return c.a.createElement("table",{className:"toolbar-legend"},c.a.createElement("tbody",null,r))}}]),n}(c.a.Component)},55:function(e,t,n){"use strict";var r=n(61);n.o(r,"ToolbarLegend")&&n.d(t,"ToolbarLegend",(function(){return r.ToolbarLegend}));n(32);var i=n(42);n.d(t,"ToolbarLegend",(function(){return i.a}))},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(2),a=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"inclusive",value:function(t,n){return t>n?e.range(t,n-t-1):e.range(t,n-t+1)}},{key:"range",value:function(e,t){var n=[];if(0===t)return[];if(t>0)for(var r=0;r<t;r++)n.push(r+e);else for(var i=0;i>t;i--)n.push(i+e);return n}}]),e}()},58:function(e,t,n){"use strict";n(1),n(2)},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),i=n(2),a=n(51),o=n(114),s=function(){function e(t,n){Object(r.a)(this,e),this._subject=new a.a,this._subject.pipe(Object(o.a)(t)).subscribe((function(e){e&&e.length&&n(e)}))}return Object(i.a)(e,[{key:"next",value:function(e){this._subject.next(e)}}]),e}()},60:function(e,t){},61:function(e,t){},62:function(e,t,n){},81:function(e,t,n){e.exports=n(113)},86:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},9:function(e,t,n){"use strict";var r=n(57);n.d(t,"Generate",(function(){return r.a}));n(58);var i=n(59);n.d(t,"BufferStream",(function(){return i.a}));var a=n(20);n.d(t,"Tools",(function(){return a.a}));n(60)},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.7bd5f112.chunk.js.map