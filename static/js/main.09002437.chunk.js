(this.webpackJsonp3dbody=this.webpackJsonp3dbody||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var r,i,a=n(5),o=n.n(a),s=n(43),c=n.n(s),u=(n(85),n(16)),l=n(14),h=n(1),d=n(2),f=n(3),p=n(4),v=(n(86),n(15)),m=n(7),g=n(70),y=n(9),b=n(18);!function(e){e[e.Uniform=0]="Uniform",e[e.LSymmetrical=1]="LSymmetrical",e[e.WSymmetrical=2]="WSymmetrical",e[e.LWSymmetrical=3]="LWSymmetrical"}(r||(r={})),function(e){e[e.All=0]="All",e[e.Odd=1]="Odd",e[e.Even=2]="Even"}(i||(i={}));var w,S,x,k=function(){function e(t){var n=this;Object(h.a)(this,e),this.props=void 0,this.vertices=[],this.indices=[],this.uvs=[],this.normals=[];var i=t.length,a=t.width,o=t.pointsMapper,s=this.vertices,c=this.indices,l=this.uvs;this.props=t;var d,f=Object(b.a)(y.Generate.range(0,i));try{for(f.s();!(d=f.n()).done;){var p,v=d.value,m=Object(b.a)(y.Generate.range(0,a));try{for(m.s();!(p=m.n()).done;){var g=p.value;s.push({vertice:o(v,g),handlers:[]}),l.push(.5,.5)}}catch(I){m.e(I)}finally{m.f()}}}catch(I){f.e(I)}finally{f.f()}var w,S=Object(b.a)(y.Generate.range(0,i));try{for(S.s();!(w=S.n()).done;){var x,k=w.value,O=Object(b.a)(y.Generate.range(0,a));try{for(O.s();!(x=O.n()).done;){var j=o(k,x.value);s.push({vertice:j,handlers:[]}),l.push(.5,.5)}}catch(I){O.e(I)}finally{O.f()}}}catch(I){S.e(I)}finally{S.f()}var C,E=function(e,t,o,s){var c=n.props.mode,u=(i-1)/2,l=(a-1)/2,h=e+t*a+o,d=h+1,f=h+a,p=f+1;switch(s){case"front":switch(c){case r.Uniform:return[h,d,f,d,p,f];case r.LSymmetrical:return t<u?[h,d,p,h,p,f]:[h,d,f,d,p,f];case r.WSymmetrical:return o<l?[h,d,p,h,p,f]:[h,d,f,d,p,f];case r.LWSymmetrical:return o<l===t<u?[h,d,p,h,p,f]:[h,d,f,d,p,f]}break;case"back":switch(c){case r.Uniform:return[h,f,d,d,f,p];case r.LSymmetrical:return t<u?[h,p,d,h,f,p]:[h,f,d,d,f,p];case r.WSymmetrical:return o<l?[h,p,d,h,f,p]:[h,f,d,d,f,p];case r.LWSymmetrical:return o<l===t<u?[h,p,d,h,f,p]:[h,f,d,d,f,p]}}return[]},M=Object(b.a)(y.Generate.range(0,i-1));try{for(M.s();!(C=M.n()).done;){var D,P=C.value,T=Object(b.a)(y.Generate.range(0,a-1));try{for(T.s();!(D=T.n()).done;){var R=D.value;this.parityMatch((P+R)%2!==0)&&c.push.apply(c,Object(u.a)(E(0,P,R,"front")))}}catch(I){T.e(I)}finally{T.f()}}}catch(I){M.e(I)}finally{M.f()}var N,W=Object(b.a)(y.Generate.range(0,i-1));try{for(W.s();!(N=W.n()).done;){var z,A=N.value,F=Object(b.a)(y.Generate.range(0,a-1));try{for(F.s();!(z=F.n()).done;){var L=z.value;this.parityMatch((A+L)%2!==0)&&c.push.apply(c,Object(u.a)(E(this.offset,A,L,"back")))}}catch(I){F.e(I)}finally{F.f()}}}catch(I){W.e(I)}finally{W.f()}}return Object(d.a)(e,[{key:"offset",get:function(){return this.props.length*this.props.width}},{key:"width",get:function(){return this.props.width}},{key:"length",get:function(){return this.props.length}}]),Object(d.a)(e,[{key:"parityMatch",value:function(e){switch(this.props.parity){case i.Even:return!1===e;case i.Odd:return!0===e;default:return!0}}},{key:"getVertice",value:function(e){return this.vertices[e].vertice}},{key:"apply",value:function(e){var t,n=this.props,r=n.length,i=n.width,a=this.vertices,o=Object(b.a)(y.Generate.range(0,r));try{for(o.s();!(t=o.n()).done;){var s,c=t.value,u=Object(b.a)(y.Generate.range(0,i));try{for(u.s();!(s=u.n()).done;){var l=s.value;e(c,l,a[c*i+l])}}catch(g){u.e(g)}finally{u.f()}}}catch(g){o.e(g)}finally{o.f()}var h,d=Object(b.a)(y.Generate.range(0,r));try{for(d.s();!(h=d.n()).done;){var f,p=h.value,v=Object(b.a)(y.Generate.range(0,i));try{for(v.s();!(f=v.n()).done;){var m=f.value;e(p,m,a[this.offset+p*i+m])}}catch(g){v.e(g)}finally{v.f()}}}catch(g){d.e(g)}finally{d.f()}}},{key:"transformedVertices",value:function(e){var t=this.vertices,n=t.map((function(e){return e.vertice})),r=[];return t.forEach((function(t){var i=t.vertice;t.handlers.forEach((function(e){i=e(i,n)})),r.push({x:i.x*e,y:i.y*e,z:i.z*e})})),r}},{key:"geometry",value:function(e){var t=this.vertices,n=this.indices,r=this.uvs,i=this.normals,a=this.props.log,o=new m.d,s=[];this.transformedVertices(e).forEach((function(e){return s.push(e.x,e.y,e.z)}));for(var c=function(e){var n=t[e].vertice;return new m.z(n.x,n.y,n.z)},u=0,l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var o=a[r];i[u++]=o}},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];a&&console.log(o),l(o.x,o.y,o.z)}},d=0;d<n.length;d+=3){var f=(new m.z).subVectors(c(n[d+1]),c(n[d])),p=(new m.z).subVectors(c(n[d+2]),c(n[d])),v=(new m.z).crossVectors(f,p).normalize();h(v,v,v)}return o.setAttribute("position",new m.g(s,3)),o.setAttribute("normal",new m.g(i,3)),o.setAttribute("uv",new m.g(r,2)),o.setIndex(n),o.computeVertexNormals(),o}}]),e}(),O=function(){function e(t,n){Object(h.a)(this,e),this.countour=t,this.segments=n}return Object(d.a)(e,[{key:"query",value:function(e){for(var t=this.countour,n=this.segments,r=e;r>=0;r--)if(n[r])return n[r];return t}}]),e}(),j=function(){function e(t,n,i,a){Object(h.a)(this,e),this.lengthPoints=t,this.widthPoints=n,this.heightPoints=i,this.left=void 0,this.right=void 0,this.front=void 0,this.back=void 0,this.top=void 0,this.bottom=void 0;var o=t-1,s=n-1,c=i-1,u=function(e){var t=e.map((function(e){return e}));return{x:t[0],y:t[1],z:t[2]}};this.left=new k({length:t,width:i,pointsMapper:function(e,t){return u([e-0,t-0,s-0])},mode:r.LSymmetrical,parity:a}),this.right=new k({length:t,width:i,pointsMapper:function(e,t){return u([e-0,t-0,-0])},mode:r.LSymmetrical,parity:a}),this.front=new k({length:n,width:i,pointsMapper:function(e,t){return u([-0,t-0,e-0])},mode:r.LSymmetrical,parity:a}),this.back=new k({length:n,width:i,pointsMapper:function(e,t){return u([o-0,t-0,e-0])},mode:r.LSymmetrical,parity:a}),this.top=new k({length:t,width:n,pointsMapper:function(e,t){return u([e-0,c-0,t-0])},mode:r.LWSymmetrical,parity:a}),this.bottom=new k({length:t,width:n,pointsMapper:function(e,t){return u([e-0,0,t-0])},mode:r.LWSymmetrical,parity:a})}return Object(d.a)(e,[{key:"halfLegth",get:function(){return(this.lengthPoints-1)/2}},{key:"halfWidth",get:function(){return(this.widthPoints-1)/2}},{key:"halfHeight",get:function(){return(this.heightPoints-1)/2}}]),Object(d.a)(e,[{key:"applyContour",value:function(e,t,n,r,i){var a=this,o=this.lengthPoints,s=this.widthPoints,c=this.heightPoints,u=function(e,t,n){return(e-t)*n+t},l=new O(t,i),h=function(e){return l.query(e)};this.left.apply((function(t,i,o){var l=h(t)[s-1].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e){var t=r.find((function(t){return y.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(t){var n=y.Tools.pythHB(t.arcRadius,t.center.x-e.x),i=Math.max(t.center.y+n,e.y*d*l);return{x:e.x,y:i,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.right.apply((function(t,i,o){var l=h(t)[0].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e){var t=r.find((function(t){return y.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(t){var n=y.Tools.pythHB(t.arcRadius,t.center.x-e.x),i=Math.max(t.center.y+n,e.y*d*l);return{x:e.x,y:i,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.top.apply((function(t,i,o){var l=h(t)[i].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e){var t=r.find((function(t){return y.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(t){var n=y.Tools.pythHB(t.arcRadius,t.center.x-e.x),i=e.y*d*l,o=0==e.z||e.z==s-1?0:1,c=t.center.y+n+o,h=y.Tools.betweenInclusive(e.z,a.halfWidth-t.offset+1,a.halfWidth+t.offset-1)?i:Math.max(i,c);return{x:e.x,y:h,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.bottom.apply((function(t,i,o){var l=h(t)[i].y/c,d=e[t].y/c,f=n[t].y/s;o.handlers=[function(e,t){var n=r.find((function(t){return y.Tools.betweenInclusive(e.x,t.center.x-t.arcRadius,t.center.x+t.arcRadius)}));if(n){var i=y.Tools.pythHB(n.arcRadius,n.center.x-e.x),o=y.Tools.betweenInclusive(e.z,a.halfWidth-n.offset,a.halfWidth+n.offset)?e.y*d*l:n.center.y+i;return{x:e.x,y:o,z:u(e.z,a.halfWidth,f)}}return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]})),this.front.apply((function(t,r,i){var o=h(0)[t].y/c,l=e[0].y/c,d=n[0].y/s;i.handlers=[function(e){return{x:e.x,y:e.y*l*o,z:u(e.z,a.halfWidth,d)}}]})),this.back.apply((function(t,r,i){var l=h(a.top.length-1)[t].y/c,d=e[o-1].y/c,f=n[o-1].y/s;i.handlers=[function(e){return{x:e.x,y:e.y*d*l,z:u(e.z,a.halfWidth,f)}}]}))}},{key:"sectionPoints",value:function(e,t){var n=this.front,r=this.top,i={front:[],side:[],top:[]};if(null===t||[t.front,t.side,t.top].every((function(e){return null===e})))return i;var a=r.transformedVertices(1);if(null!==t.front)if(e.frontSegments[t.front]){var o;(o=i.front).push.apply(o,Object(u.a)(e.frontSegments[t.front]))}else{var s,c=y.Generate.range(0,n.length).map((function(e){return a[e+(t.front||0)*n.length]}));(s=i.front).push.apply(s,Object(u.a)(c.map((function(e){return{x:e.x,y:e.y}}))))}if(null!==t.top){var l,h=y.Generate.range(0,r.length).map((function(e){return a[(t.top||0)+e*r.width]}));(l=i.top).push.apply(l,Object(u.a)(h.map((function(e){return{x:e.x,y:e.z}}))))}if(null!==t.side){var d,f=y.Generate.range(0,r.length).map((function(e){return a[(t.side||0)+e*r.width]}));(d=i.side).push.apply(d,Object(u.a)(f.map((function(e){return{x:e.x,y:e.y}}))))}return i}},{key:"geometry",get:function(){return[this.left,this.right,this.front,this.back,this.top,this.bottom].map((function(e){return e.geometry(5)}))}}]),e}(),C=n(51),E=n(116),M=n(117),D=function(){function e(t){Object(h.a)(this,e),this.design=t}return Object(d.a)(e,[{key:"interpolateSections",value:function(){for(var e=this.design.boxSize,t=this.interpolationSource,n=this.existingIndexes,r=function(r){for(var i=n[r],a=t[i],o=n[r+1],s=t[o],c=o-i,u=y.Generate.range(0,e.y).map((function(e){return(s[e].y-a[e].y)/c})),l=function(n){var r=y.Generate.range(0,e.y).map((function(e){return{x:e,y:a[e].y+u[e]*(n-i)}}));t[n]=r},h=i+1;h<o;h++)l(h)},i=0;i<n.length-1;i++)r(i);return t}},{key:"interpolationSource",get:function(){var e=this.design,t=e.frontSegments,n=e.frontPoints,r=Object(u.a)(t);return r[0]||(r[0]=Object(u.a)(n)),r}},{key:"existingIndexes",get:function(){var e=this.design.boxSize,t=this.interpolationSource;return y.Generate.range(0,e.x).filter((function(e){return t[e]}))}}]),e}(),P=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e))._subscription=void 0,r._updateStream=new C.a,r.scene=null,r.camera=null,r.light=null,r.renderer=null,r.bodyMesh=null,r.orbitControls=null,r.container=null,r.ang=0,r.state={flatShading:!0},r.animate=r.animate.bind(Object(v.a)(r)),r._subscription=r._updateStream.pipe(Object(E.a)((function(){return Object(M.a)(500)}))).subscribe((function(){return r.updateMesh("debounce")})),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.init(),this.subscribeForResizeEvents(),this.updateMesh("mount"),requestAnimationFrame(this.animate),this.forceUpdate()}},{key:"componentDidUpdate",value:function(){this._updateStream.next({})}},{key:"componentWillUnmount",value:function(){this._subscription.unsubscribe()}},{key:"updateMesh",value:function(e){var t=this,n=this.scene;if(n){this.bodyMesh&&this.bodyMesh.forEach((function(e){var n;return null===(n=t.scene)||void 0===n?void 0:n.remove(e)})),this.bodyMesh=[];for(var r=this.props,a=r.design,o=r.renderSettings,s=a.boxSize,c=a.frontPoints,l=a.sidePoints,h=a.topPoints,d=a.colorOdd,f=a.colorEven,p=a.wheels,v=o.flatShading,g=o.wireframes,y=[{parity:i.Odd,color:d},{parity:i.Even,color:f}],b=new D(a).interpolateSections(),w=function(){var e,n=x[S],r=new j(s.x,s.y,s.z,n.parity);r.applyContour(l,c,h,p,b);var i=new m.o({color:g?65280:n.color,wireframe:g,flatShading:v});(e=t.bodyMesh).push.apply(e,Object(u.a)(r.geometry.map((function(e){return new m.m(e,i)}))))},S=0,x=y;S<x.length;S++)w();this.bodyMesh.forEach((function(e){return n.add(e)}))}}},{key:"initGround",value:function(){if(this.scene){var e=new m.m(new m.q(2e3,2e3),new m.o({color:10066329,depthWrite:!1}));e.rotation.x=-Math.PI/2,e.receiveShadow=!0,this.scene.add(e);var t=new m.h(2e3,20,0,0),n=t.material;n.opacity=.2,n.transparent=!0,this.scene.add(t)}}},{key:"init",value:function(){this.scene=new m.s;var e=new m.b(500);this.scene.add(e),this.camera=new m.p(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new m.A,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.orbitControls=new g.a(this.camera,this.renderer.domElement),this.orbitControls.target.set(0,25,0),this.orbitControls.update(),this.scene.add(new m.a(7829367)),this.light=new m.e(14674943,1),this.light.position.set(500,600,700),this.light.castShadow=!0,this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024;var t=300;this.light.shadow.camera.left=-t,this.light.shadow.camera.right=t,this.light.shadow.camera.top=t,this.light.shadow.camera.bottom=-t,this.light.shadow.camera.far=1e3,this.scene.add(this.light),this.initGround()}},{key:"animate",value:function(){var e,t,n=this.renderer,r=this.scene,i=this.camera,a=this.orbitControls;requestAnimationFrame(this.animate),this.ang+=.01;var o=new m.z(500,600,700);o.applyAxisAngle(new m.z(0,1,0),this.ang),null===(e=this.light)||void 0===e||null===(t=e.position)||void 0===t||t.set(o.x,o.y,o.z),null===a||void 0===a||a.update(),n&&r&&i&&n.render(r,i)}},{key:"onContainerCreated",value:function(e){var t,n;(this.container=e,e&&(null===(t=this.renderer)||void 0===t?void 0:t.domElement))&&(this.renderer.setSize(e.offsetWidth-2,e.offsetHeight-2),this.camera&&(this.camera.aspect=e.offsetWidth/e.offsetHeight,this.camera.updateProjectionMatrix()),null===(n=e.appendChild)||void 0===n||n.call(e,this.renderer.domElement))}},{key:"subscribeForResizeEvents",value:function(){var e=this;window.addEventListener("resize",(function(){var t=e.renderer,n=e.camera,r=e.container;if(t&&r&&n){var i=r.offsetWidth-2,a=r.offsetHeight-2;n.aspect=i/a,n.updateProjectionMatrix(),t.setSize(i,a)}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height;console.log("scene",n,r);var i={width:n,height:r};return o.a.createElement("div",{style:i},o.a.createElement("div",{style:i,ref:function(t){return e.onContainerCreated(t)}}))}}]),n}(o.a.Component),T=(n(25),n(20));!function(e){e[e.Contour=0]="Contour",e[e.Wheel=1]="Wheel"}(w||(w={})),function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Side=2]="Side"}(S||(S={})),function(e){e[e.None=0]="None",e[e.Pick=1]="Pick",e[e.Edit=2]="Edit"}(x||(x={}));n(89);var R,N=function(){function e(t,n,r){Object(h.a)(this,e),this.margin=t,this.scale=n,this.toCtx=r}return Object(d.a)(e,[{key:"drawWheelSide",value:function(e,t){var n=this.margin,r=this.scale,i=this.toCtx,a=i(t.center),o=i({x:t.center.x-t.wheelRadius,y:t.center.y}),s=i({x:t.center.x-t.wheelRadius,y:0}),c=i({x:t.center.x+t.wheelRadius,y:t.center.y}),u=i({x:t.center.x+t.wheelRadius,y:0}),l=i({x:t.center.x,y:t.center.y+t.wheelRadius});e.beginPath(),e.arc(n+a.x,n+a.y,t.wheelRadius*r,Math.PI,2*Math.PI),e.moveTo(n+o.x,n+o.y),e.lineTo(n+s.x,n+s.y),e.moveTo(n+c.x,n+c.y),e.lineTo(n+u.x,n+u.y),e.stroke(),e.beginPath(),e.arc(n+a.x,n+a.y,5,0,2*Math.PI),e.arc(n+l.x,n+l.y,5,0,2*Math.PI),e.fill()}},{key:"drawWheelTop",value:function(e,t){var n=this.margin,r=this.toCtx,i=r({x:t.center.x,y:2*t.offset}),a=r({x:t.center.x,y:2*(t.offset+t.width)}),o=[{x:t.center.x-t.wheelRadius,y:2*t.offset},{x:t.center.x+t.wheelRadius,y:2*t.offset},{x:t.center.x+t.wheelRadius,y:2*(t.offset+t.width)},{x:t.center.x-t.wheelRadius,y:2*(t.offset+t.width)}].map(r);e.beginPath(),e.moveTo(n+o[3].x,n+o[3].y),o.forEach((function(t,r){e.lineTo(n+t.x,n+t.y)})),e.stroke(),e.beginPath(),e.arc(n+i.x,n+i.y,5,0,2*Math.PI),e.arc(n+a.x,n+a.y,5,0,2*Math.PI),e.fill()}}]),e}();!function(e){e[e.Create=0]="Create",e[e.MoveCenter=1]="MoveCenter",e[e.ChangeRadius=2]="ChangeRadius",e[e.ChangeWidth=3]="ChangeWidth",e[e.ChangeOffset=4]="ChangeOffset"}(R||(R={}));var W=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).canvas=null,r.sectionCanvas=null,r.buffer=null,r.enabled=!1,r.lastPoint=null,r.state={scale:0,margin:25,sectionSelectorHeight:80,wheelMode:R.Create,wheelIndex:-1},r.onMouseUp=r.onMouseUp.bind(Object(v.a)(r)),r.processPoints=r.processPoints.bind(Object(v.a)(r)),r.buffer=new y.BufferStream(50,r.processPoints),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onMouseUp),this.updateScale()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onMouseUp)}},{key:"updateScale",value:function(){var e=this.props,t=e.width,n=e.height,r=e.contour,i=e.maxY,a=this.state,o=a.sectionSelectorHeight,s=a.scale,c=a.margin,u=Math.min(Math.floor((t-2*c-20)/r.length),Math.floor((n-2*c-o)/i));console.log("scale",u),s!=u&&this.setState({scale:u})}},{key:"mouseDisconnected",value:function(){var e=this;this.enabled=!1,this.lastPoint=null,this.setState({wheelMode:R.Create,wheelIndex:-1},(function(){var t=e.props,n=t.contour,r=t.wheels,i=t.onCountourChange;r&&i(n,r.filter((function(e){return e.arcRadius>2})))}))}},{key:"onMouseUp",value:function(e){this.enabled&&(null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault(),this.mouseDisconnected())}},{key:"componentDidUpdate",value:function(){this.drawSignal(),this.updateScale()}},{key:"drawGrid",value:function(e){var t=this.props,n=t.contour,r=t.maxY,i=this.state,a=i.scale,o=i.margin,s=(n.length-1)*a,c=r*a;e.clearRect(0,0,s+2*o,c+2*o),e.setLineDash([]),e.lineWidth=1,e.beginPath(),e.moveTo(o,o+c),e.lineTo(o+s,o+c),e.stroke(),e.setLineDash([1,2]);var u,l=Object(b.a)(y.Generate.range(0,n.length));try{for(l.s();!(u=l.n()).done;){var h=u.value;e.moveTo(o+h*a,o),e.lineTo(o+h*a,o+c)}}catch(v){l.e(v)}finally{l.f()}var d,f=Object(b.a)(y.Generate.range(0,r));try{for(f.s();!(d=f.n()).done;){var p=d.value;e.moveTo(o+0,o+p*a),e.lineTo(o+s,o+p*a)}}catch(v){f.e(v)}finally{f.f()}e.strokeStyle="#000000",e.stroke(),e.setLineDash([])}},{key:"translate",value:function(e){var t=this.props.maxY*this.state.scale;return e?{x:Math.floor(e.x),y:t-e.y}:{x:0,y:0}}},{key:"samplePoint",value:function(e,t){return this.scalePoint(e[t])}},{key:"scalePoint",value:function(e){var t=this.state.scale;return e?{x:e.x*t,y:e.y*t}:null}},{key:"drawWheels",value:function(e){var t,n=this,r=this.props,i=r.wheels,a=r.wheelDrawing,o=this.state,s=o.margin,c=o.scale,u=new N(s,c,(function(e){return n.translate(n.scalePoint(e))})),l=Object(b.a)(i||[]);try{for(l.s();!(t=l.n()).done;){var h=t.value;switch(a){case S.None:break;case S.Side:u.drawWheelSide(e,h);break;case S.Top:u.drawWheelTop(e,h)}}}catch(d){l.e(d)}finally{l.f()}}},{key:"drawPoints",value:function(e,t,n){var r=this.state.margin,i=e.strokeStyle;e.lineWidth=3,e.imageSmoothingEnabled=!0,e.strokeStyle=n,e.beginPath();for(var a=0;a<t.length-1;a++){var o=this.translate(this.samplePoint(t,a)),s=this.translate(this.samplePoint(t,a+1));e.moveTo(r+o.x,r+o.y),e.lineTo(r+s.x,r+s.y)}e.stroke(),e.strokeStyle=i}},{key:"drawSections",value:function(e){var t=this.state.margin,n=this.props,r=n.design,i=n.sectionMode;if(n.showSectionSelector&&i===x.Pick){var a=new D(r).existingIndexes;e.beginPath();var o,s=Object(b.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=this.translate(this.scalePoint({x:c,y:0})),l=this.translate(this.scalePoint({x:c,y:this.height}));e.moveTo(t+u.x,t+u.y),e.lineTo(t+l.x,t+l.y)}}catch(h){s.e(h)}finally{s.f()}e.stroke()}}},{key:"drawSignal",value:function(){var e=this.canvas;if(e){var t=e.getContext("2d");if(t){this.drawGrid(t);var n=this.props,r=n.contour,i=n.section,a=n.sectionBaseline,o=n.showSectionSelector,s=n.sectionMode;o&&s===x.Edit?(a&&this.drawPoints(t,a,"gray"),i&&this.drawPoints(t,i,"black")):this.drawPoints(t,r,"black"),this.drawWheels(t),this.drawSections(t)}}}},{key:"lerp",value:function(e,t,n){var r=n.x-t.x,i=(n.y-t.y)/r;y.Generate.inclusive(t.x,n.x).forEach((function(n,r){e[n].y=t.y+r*i}))}},{key:"reflect",value:function(e){return{x:2*((this.currentSamples.length-1)/2)-e.x,y:e.y}}},{key:"processPoints",value:function(e){var t=this.props,n=t.symmetrical,r=t.showSectionSelector,i=t.sectionMode,a=t.onSectionSelected;if(r&&i===x.Pick)a(r,e[e.length-1].x);else{var o,s=this.currentSamples,c=(s.length-1)/2,u=Object(b.a)(e);try{for(u.s();!(o=u.n()).done;){var l=o.value,h=this.lastPoint;h&&l.x!==h.x?n?T.a.between(c,h.x,l.x)?console.log("skipped",c,h.x,l.x):(this.lerp(s,h,l),this.lerp(s,this.reflect(l),this.reflect(h))):this.lerp(s,h,l):n?(s[l.x].y=l.y,s[this.reflect(l).x].y=l.y):s[l.x].y=l.y,this.lastPoint=l}}catch(d){u.e(d)}finally{u.f()}this.currentSamples=s}}},{key:"onWheelChange",value:function(e,t){var n=this.props,r=n.contour,i=n.wheels,a=n.onCountourChange;i&&(-1===t?this.setState({wheelIndex:i.length},(function(){a(r,[].concat(Object(u.a)(i),[e]))})):this.setState({wheelIndex:t},(function(){a(r,i.map((function(n,r){return r===t?e:n})))})))}},{key:"wheelDataFromPoint",value:function(e,t){var n=this.props.wheels,r=Math.sqrt(Math.pow(e.x-t.center.x,2)+Math.pow(e.y-t.center.y,2)),i=Math.sqrt(Math.pow(e.x-t.center.x,2)+Math.pow(e.y-(t.center.y+t.wheelRadius),2)),a=T.a.pythBP(e.x-t.center.x,e.y-2*t.offset),o=T.a.pythBP(e.x-t.center.x,e.y-2*(t.offset+t.width));return{wheel:t,wheelIndex:(n||[]).indexOf(t),distToCenter:r,distToRadiusHandler:i,distToOffsetHandler:a,distToWidthHandler:o}}},{key:"wheelIndexFromPoint",value:function(e){var t=this.props.wheels,n=this.state.wheelIndex;if(t&&t[n])return this.wheelDataFromPoint(e,t[n]);var r,i=Object(b.a)(t||[]);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this.wheelDataFromPoint(e,a);if([o.distToCenter,o.distToRadiusHandler,o.distToOffsetHandler,o.distToWidthHandler].some((function(e){return e<2})))return o}}catch(s){i.e(s)}finally{i.f()}return{wheel:null,wheelIndex:-1,distToCenter:0,distToRadiusHandler:0,distToOffsetHandler:0,distToWidthHandler:0}}},{key:"fromCanvasCoordinates",value:function(e,t){var n=this.props,r=n.contour,i=n.maxY,a=this.state,o=a.scale,s=a.margin;if(!e)return{x:0,y:0};var c=e.getBoundingClientRect(),u=this.translate({x:t.clientX-c.left-s,y:0});return u.x=T.a.withinRange(Math.round(u.x/o),0,r.length-1),u.y=T.a.withinRange(u.y/o,0,i),u}},{key:"setPosition",value:function(e){var t=this,n=this.props,r=n.contour,i=n.maxY,a=n.mode,o=n.wheelDrawing,s=this.state,c=s.scale,u=s.margin,h=s.wheelMode;if(this.canvas){e.stopPropagation(),e.preventDefault();var d=this.canvas.getBoundingClientRect(),f=this.translate({x:e.clientX-d.left-u,y:e.clientY-d.top-u});f.x=T.a.withinRange(Math.round(f.x/c),0,r.length-1),f.y=T.a.withinRange(f.y/c,0,i);var p,v=this.wheelIndexFromPoint(f),m=v.wheel,g=v.wheelIndex,y=v.distToCenter,b=v.distToRadiusHandler,x=v.distToOffsetHandler,k=v.distToWidthHandler;if(a!==w.Contour||m){if(a===w.Wheel||a===w.Contour&&m){if(!this.props.wheels)return;if(m)switch(o){case S.Side:f.x=T.a.withinRange(f.x,m.wheelRadius,r.length-1-m.wheelRadius),f.y=T.a.withinRange(f.y,0,i-m.wheelRadius);break;case S.Top:f.x=T.a.withinRange(f.x,m.wheelRadius,r.length-1-m.wheelRadius),f.y=T.a.withinRange(f.y,0,i)}switch(h){case R.MoveCenter:m&&this.onWheelChange(Object(l.a)(Object(l.a)({},m),{},{center:f}),g);break;case R.ChangeRadius:m&&this.onWheelChange(Object(l.a)(Object(l.a)({},m),{},{arcRadius:y,wheelRadius:y}),g);break;case R.ChangeOffset:m&&this.onWheelChange(Object(l.a)(Object(l.a)({},m),{},{offset:f.y/2}),g);break;case R.ChangeWidth:m&&this.onWheelChange(Object(l.a)(Object(l.a)({},m),{},{width:f.y/2-m.offset}),g);break;case R.Create:switch(o){case S.Side:if(m){if(y<2)return void this.setState({wheelMode:R.MoveCenter});if(b<3)return void this.setState({wheelMode:R.ChangeRadius})}break;case S.Top:if(m){if(x<2)return void this.setState({wheelMode:R.ChangeOffset});if(k<3)return void this.setState({wheelMode:R.ChangeWidth})}}this.setState({wheelMode:R.ChangeRadius},(function(){t.onWheelChange({center:f,arcRadius:0,wheelRadius:0,offset:10,width:10},g)}))}}}else null===(p=this.buffer)||void 0===p||p.next(f)}}},{key:"renderSectionSelector",value:function(){var e=this.props,t=e.sectionMode,n=e.onSectionChanged,r=e.onSectionSelected,i=e.sections,a=e.sectionIndex,s=e.showSectionSelector;if(t!==x.Edit)return null;if(!n)return null;if(!s)return null;var c=function(e){r(s,e)},u=i-1;return o.a.createElement("div",{className:"section-selector"},o.a.createElement("input",{type:"range",min:0,max:u,value:a,onChange:function(e){return c(parseInt(e.target.value))}}),o.a.createElement("input",{type:"number",value:a,min:0,max:u,onChange:function(e){return c(parseInt(e.target.value))}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.contour,i=t.maxY,a=this.state,s=a.scale,c=a.margin;if(!s)return null;var u=r.length*s+2*c,l=i*s+2*c;return console.log(n,s,u,l),o.a.createElement("div",null,o.a.createElement("div",null,this.renderSectionSelector(),o.a.createElement("canvas",{width:u,height:l,className:"drawing-canvas",onDoubleClick:function(e){e.stopPropagation(),e.preventDefault()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault()},onPointerEnter:function(e){e.preventDefault(),e.stopPropagation()},onPointerLeave:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDisconnected()},onPointerDown:function(t){1===t.buttons&&(e.enabled=!0,e.lastPoint=null,e.setPosition(t),t.preventDefault(),t.stopPropagation())},onPointerUp:function(t){e.mouseDisconnected(),t.preventDefault(),t.stopPropagation()},onPointerMove:function(t){e.enabled&&(e.setPosition(t),t.preventDefault(),t.stopPropagation())},onPointerCancel:function(e){e.preventDefault(),e.stopPropagation()},onMouseDown:function(t){1===t.buttons&&(e.enabled=!0,e.lastPoint=null,e.setPosition(t),t.preventDefault(),t.stopPropagation())},onMouseMove:function(t){e.enabled&&(e.setPosition(t),t.preventDefault(),t.stopPropagation())},onMouseUp:function(t){e.mouseDisconnected(),t.stopPropagation(),t.preventDefault()},ref:function(t){e.canvas=t,e.drawSignal()}})))}},{key:"currentSamples",get:function(){var e=this.props,t=e.contour,n=e.section,r=e.sectionBaseline,i=n||r;return(e.showSectionSelector&&i?i:t).map((function(e){return Object(l.a)({},e)}))},set:function(e){var t=this.props,n=t.wheels,r=t.showSectionSelector,i=t.sectionIndex,a=t.onCountourChange,o=t.onSectionChanged;r?o([i],e):a(e,n)}},{key:"width",get:function(){var e=this.props.contour,t=this.state.scale;return(e.length-1)*t}},{key:"height",get:function(){return this.props.maxY*this.state.scale}}]),n}(a.Component),z=n(32),A=n(31),F=n(115),L=function(){function e(){Object(h.a)(this,e),this._stream=void 0,this._stream=new F.a({designStore:this,storageModel:this.defaultStorageModel(),design:null}),this.updateDesign(null)}return Object(d.a)(e,[{key:"subscribe",value:function(e){this._stream.subscribe(e)}},{key:"defaultStorageModel",value:function(){return{version:1,designs:[this.newDesing("Default")]}}},{key:"migrate",value:function(e){e.designs.forEach((function(e){e.wheels||(e.wheels=[]),e.wheels.forEach((function(e){e.offset||(e.offset=10),e.width||(e.width=10)})),e.frontSegments||(e.frontSegments=[])}))}},{key:"loadFromLocalStorage",value:function(){var e=localStorage.getItem("Designs");if(!e)return this.defaultStorageModel();var t=JSON.parse(e);return this.migrate(t),t}},{key:"saveStorageModel",value:function(e){if(e){var t=JSON.stringify(e);localStorage.setItem("Designs",t)}}},{key:"saveToLocalStorage",value:function(e,t){if(e){var n=this.loadFromLocalStorage();n.designs=n.designs.map((function(n){return n.name===e.name?(null===t||void 0===t||t(e),e):n})),n.designs.includes(e)||n.designs.push(e),this.saveStorageModel(n)}}},{key:"deleteDesign",value:function(e){if(e){var t=this.loadFromLocalStorage();t.designs=t.designs.filter((function(t){return t.name!==e.name})),this.saveStorageModel(t),this.updateDesign(null)}}},{key:"updateDesign",value:function(e,t){e&&this.saveToLocalStorage(e,t),this.setActiveDesign(e)}},{key:"setActiveDesign",value:function(e){var t=this.loadFromLocalStorage(),n={designStore:this,storageModel:t,design:t.designs.find((function(t){return t.name===(null===e||void 0===e?void 0:e.name)}))||t.designs[0]};this._stream.next(n)}},{key:"newDesing",value:function(e){var t={x:101,y:41,z:31},n=y.Generate.range(0,t.x).map((function(e){return{x:e,y:t.z}})),r=y.Generate.range(0,t.y).map((function(e){return{x:e,y:t.z}})),i=y.Generate.range(0,t.x).map((function(e){return{x:e,y:t.y}}));return{name:e,boxSize:t,sidePoints:n,frontPoints:r,topPoints:i,colorOdd:15432969,colorEven:0,wheels:[],frontSegments:[]}}},{key:"resetAll",value:function(){this.saveStorageModel(this.defaultStorageModel()),this.setActiveDesign(null)}},{key:"replaceStorageModel",value:function(e){this.migrate(e),this.saveStorageModel(null!==e&&void 0!==e?e:this.defaultStorageModel()),this.setActiveDesign(null)}},{key:"appendStorageModel",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,n=this._stream.value.storageModel;this.migrate(n),(t=n.designs).push.apply(t,Object(u.a)(e.designs)),this.replaceStorageModel(n)}))},{key:"state",get:function(){return this._stream.value}}]),e}(),I=n(8),B=n.n(I),G=n(12),U=n(54),_=(n(93),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"section",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.a.createElement("div",{className:"tutorial-section"},o.a.createElement("header",null,e),t&&o.a.createElement("p",null,t),n&&o.a.createElement("img",{src:"tutorial/".concat(n,".gif")}))}},{key:"render",value:function(){var e=this.props,t=e.mainToolbarItems,n=e.sideEditorToolbar;return o.a.createElement("div",{className:"tutorial"},this.section("Main Toolbar",o.a.createElement(U.ToolbarLegend,{items:t,dialogFactory:null})),this.section("Side Editor Toolbar",o.a.createElement(U.ToolbarLegend,{items:n,dialogFactory:null})),this.section("Front view","Draw front view of car body, then smooth contour","car_front"),this.section("Top view","Draw top view of car body, then smooth contour","car_top"),this.section("Side view","Draw side view of car body, then smooth contour","car_side"),this.section("Add wheels","","car_wheels"),this.section("Front section","Draw front sections view of car body, then smooth contour","car_sections"),this.section("3D View","","car_fly_by"))}}]),n}(o.a.Component)),H=function(){function e(){Object(h.a)(this,e)}return Object(d.a)(e,[{key:"MainToolbar",value:function(e,t,n){var r=this,i=function(){return e()},a=function(){return t()},o=[{icon:"FcViewDetails",title:"Legend",action:function(){return A.a.Modal("Main Toolbar",o)}},{icon:"FaUniversity",title:"Tutorials",action:function(){return r.tutorials(o)}},{isSeparator:!0},{icon:"GrPowerReset",title:"Reset All",action:function(){return i().resetAll()}},{icon:"GrFavorite",title:"Load sample designs",action:function(){return i().loadSampleDesigns()}},{isSeparator:!0},{icon:"VscNewFile",title:"New Design",action:function(){return i().newDesign()}},{icon:"FiDownload",title:"Download designs",action:function(){return i().downloadDesigns()}},{icon:"FiUpload",title:"Upload designs",action:function(){return i().uploadDesigns()}},{icon:"AiOutlineExport",title:"Export STL",action:function(){return i().exportSTL()}},{isSeparator:!0},{icon:"GrClone",title:"Clone Design",action:function(){return i().cloneDesign()}},{icon:"AiOutlineSetting",title:"Settings",action:function(){return i().settings()}},{icon:"AiOutlineCloseCircle",title:"Delete Design",action:function(){return i().deleteDesign()}},{isSeparator:!0},{icon:"GiWireframeGlobe",title:"Wireframes",selected:function(){return a().wireframes},action:function(){return n({wireframes:!a().wireframes})}},{icon:"CgEditShadows",title:"Flat Shading",selected:function(){return a().flatShading},action:function(){return n({flatShading:!a().flatShading})}},{isSeparator:!0},{icon:"AiOutlineGithub",title:"Github",action:function(){window.open("https://github.com")}},{icon:"AiOutlineTwitter",title:"Twitter",action:function(){window.open("https://twitter.com")}},{icon:"BiChip",title:"QuSoC",action:function(){window.open("https://github.com/EvgenyMuryshkin/qusoc")}}];return o}},{key:"tutorials",value:function(){var e=Object(G.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.SideEditorToolbar({mode:w.Contour,showSectionSelector:!1,hasWheels:!1,currentSection:0,sectionParams:{}},null),e.next=3,z.a.Modal({title:"How to create a car model",icon:"FaUniversity",body:o.a.createElement(_,{mainToolbarItems:t,sideEditorToolbar:n}),buttonsFactory:z.a.CloseButtons});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"SideEditorToolbar",value:function(e,t){var n=e.mode,r=e.hasWheels,i=e.sectionParams,a=e.showSectionSelector,o=e.currentSection,s=[{icon:"FcViewDetails",title:"Legend",action:function(){return A.a.Modal("Main Toolbar",s)}},{icon:"AiOutlineFullscreen",title:"Fullscreen edit",action:function(){var e=Object(G.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.fullscreenEdit();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{isSeparator:!0},{icon:"ImPencil2",title:"Draw countour",selected:function(){return n===w.Contour},action:function(){return null===t||void 0===t?void 0:t.setDrawingMode(w.Contour)}},{icon:"GiCartwheel",title:"Draw wheel",selected:function(){return n===w.Wheel},hidden:function(){return!r},action:function(){return null===t||void 0===t?void 0:t.setDrawingMode(w.Wheel)}},{isSeparator:!0},{icon:"ImMoveUp",title:"Move Up",action:function(){return null===t||void 0===t?void 0:t.moveUp()}},{icon:"ImMoveDown",title:"Move Down",action:function(){return null===t||void 0===t?void 0:t.moveDown()}},{icon:"AiOutlineBorderTop",title:"All Up",action:function(){return null===t||void 0===t?void 0:t.allUp()}},{icon:"AiOutlineBorderBottom",title:"All Down",action:function(){return null===t||void 0===t?void 0:t.allDown()}},{icon:"GiWhiplash",title:"Smooth",action:function(){return null===t||void 0===t?void 0:t.smooth()}},{isSeparator:!0},{icon:"GiSlicedBread",title:"Slice Edit",selected:function(){return a},action:function(){return null===t||void 0===t?void 0:t.onSectionSelected(!a,o)}},{icon:"AiFillLock",title:"Lock section",iconParams:i,action:function(){return null===t||void 0===t?void 0:t.lockSection()}},{icon:"RiDeleteBack2Line",title:"Revert section",iconParams:i,action:function(){return null===t||void 0===t?void 0:t.removeSection()}},{icon:"TiArrowForwardOutline",title:"Apply to remaining sections",iconParams:i,action:function(){return null===t||void 0===t?void 0:t.applyToRemaining()}}];return s}}]),e}(),Y=n(21),V=(n(61),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e))._container=null,r.state={contour:[],wheels:null},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.contour,n=e.wheels;this.setState({contour:t.map((function(e){return{x:e.x,y:e.y}})),wheels:n?n.map((function(e){return y.Tools.clone(e)})):null})}},{key:"render",value:function(){var e,t,n,r,i,o,s=this,c=this.props,u=c.id,l=c.title,h=c.symmetrical,d=c.maxY,f=c.onCountourChange,p=c.wheelDrawing,v=c.sections,m=c.onSectionSelected,g=c.onSectionChanged,y=c.section,b=c.sectionBaseline,w=c.showSectionSelector,S=c.currentSection,x=c.design,k=c.sectionMode,O=this.state,j=O.contour,C=O.wheels,E=.9*(null!==(e=null===(t=this._container)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:0),M=.9*(null!==(n=null===(r=this._container)||void 0===r?void 0:r.clientHeight)&&void 0!==n?n:0);return a.createElement("div",{className:"modal-side-editor",ref:function(e){return s._container=e}},"(",null===(i=this._container)||void 0===i?void 0:i.clientWidth,"x",null===(o=this._container)||void 0===o?void 0:o.clientHeight,")",E&&M?a.createElement(q,{id:"".concat(u,"_modal"),title:l,symmetrical:h,width:E,height:M,contour:j,maxY:d,onCountourChange:function(e,t){s.setState({contour:e,wheels:t},(function(){return f(s.state.contour,s.state.wheels)}))},wheels:C,wheelDrawing:p,sections:v,sectionBaseline:b,onSectionChanged:g,onSectionSelected:m,section:y,showSectionSelector:w,currentSection:S,design:x,sectionMode:k}):null)}}]),n}(a.Component)),q=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={mode:w.Contour},r}return Object(d.a)(n,[{key:"moveUp",value:function(){var e=this.props.maxY,t=this.currentSamples;t.some((function(t){return t.y>e-1}))||(t.forEach((function(e){return e.y++})),this.currentSamples=t)}},{key:"moveDown",value:function(){var e=this.currentSamples;e.some((function(e){return e.y<1}))||(e.forEach((function(e){return e.y--})),this.currentSamples=e)}},{key:"allUp",value:function(){var e=this.props.maxY,t=this.currentSamples;t.forEach((function(t){return t.y=e})),this.currentSamples=t}},{key:"allDown",value:function(){var e=this.currentSamples;e.forEach((function(e){return e.y=0})),this.currentSamples=e}},{key:"fullscreenEdit",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,i,o,s,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.title,r=t.contour,i=t.wheels,o=t.onCountourChange,s=r,c=i,e.next=5,Y.a.Modal({title:n,body:a.createElement(V,Object.assign({},this.props,{onCountourChange:function(e,t){s=e,c=t}})),buttonsFactory:Y.a.OKCancelButtons});case 5:if(!e.sent){e.next=7;break}o(s,c);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"smooth",value:function(){var e=this.currentSamples,t=this.currentSamples.map((function(t,n){return 0===n||n===e.length-1?t:{x:t.x,y:(e[n-1].y+e[n].y+e[n+1].y)/3}}));this.currentSamples=t}},{key:"applyToRemaining",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,i,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.showSectionSelector,r=t.currentSection,i=t.sections,a=t.onSectionChanged,n){e.next=5;break}return e.next=4,Y.a.Notification("Section editor is disabled");case 4:return e.abrupt("return");case 5:return e.next=7,Y.a.Confirm("Apply current contour to the rest of the model?");case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:o=this.currentSamples,a(y.Generate.inclusive(r,i),o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeSection",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.currentSection,r=t.onSectionChanged,e.next=3,Y.a.Confirm("Revert current section to baseline?");case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:r([n],null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lockSection",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.currentSection,r=t.sectionBaseline,i=t.onSectionChanged,e.next=3,Y.a.Confirm("Lock current section to baseline?");case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:i([n],r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"interpolateSections",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.props.onInterpolateSections)||void 0===t||t();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDrawingMode",value:function(e){this.setState({mode:e})}},{key:"onSectionSelected",value:function(e,t){var n=this.props.onSectionSelected;n(e,t)}},{key:"renderMenu",value:function(){var e=this.props,t=e.showSectionSelector,n=e.currentSection,r=e.wheels,i=(e.onSectionSelected,e.onInterpolateSections,this.state.mode),o={bordered:!0},s=Object(l.a)(Object(l.a)({},o),{},{readOnly:!t,readOnlyTitle:"Turn on section editor"}),c=(new H).SideEditorToolbar({hasWheels:!r,mode:i,showSectionSelector:t,currentSection:n,sectionParams:s},this);return a.createElement(A.a,{className:"menu menu-top",items:c,iconParams:o})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.title,r=e.width,i=e.height,o=e.maxY,s=e.symmetrical,c=e.contour,u=e.onCountourChange,l=e.wheels,h=e.wheelDrawing,d=e.sections,f=e.section,p=e.sectionBaseline,v=e.onSectionChanged,m=e.onSectionSelected,g=e.showSectionSelector,y=e.currentSection,b=e.design,w=e.sectionMode,S=this.state.mode,x=[n,null!==y?"@".concat(y):null];return a.createElement("div",{className:"side-editor"},this.renderMenu(),a.createElement("div",{className:"side-drawing-container"},x.filter(Boolean).join(","),a.createElement(W,{id:t,symmetrical:s,width:r,height:i,contour:c,maxY:o,mode:S,onCountourChange:u,wheels:l,wheelDrawing:h,sections:d,onSectionChanged:v,showSectionSelector:g,section:f,sectionBaseline:p,onSectionSelected:function(e,t){m(g,t)},sectionIndex:y,design:b,sectionMode:w})))}},{key:"currentSamples",get:function(){var e=this.props,t=e.contour,n=e.section,r=e.sectionBaseline,i=n||r;return(e.showSectionSelector&&i?i:t).map((function(e){return Object(l.a)({},e)}))},set:function(e){var t=this.props,n=t.wheels,r=t.currentSection,i=t.showSectionSelector,a=t.onCountourChange,o=t.onSectionChanged;i?o([r],e):a(e,n)}}]),n}(a.Component),J=n(77),X=n(78),K=n(79),Z=n.n(K),Q=function(){function e(t){Object(h.a)(this,e),this.designStoreState=t}return Object(d.a)(e,[{key:"exportText",value:function(e,t,n){var r=new Blob([e],{type:t});this.exportBlob(r,n)}},{key:"exportBlob",value:function(e,t){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=URL.createObjectURL(e),n.download=t,n.click(),n.remove()}},{key:"exportSTL",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,a,o,s,c,u,l,h,d,f,p,v,g;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState.design){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,z.b.Modal("Export to STL",{stringName:"".concat(t.name,".stl"),intXRotationDeg:90,intYRotationDeg:0,intZRotationDeg:0});case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:r=t.boxSize,a=t.topPoints,o=t.frontPoints,s=t.sidePoints,c=t.wheels,u=new J.a,l=new j(r.x,r.y,r.z,i.All),h=new D(t),d=h.interpolateSections(),l.applyContour(s,o,a,c,d),(f=Object(X.a)(l.geometry)).rotateX(m.l.degToRad(n.intXRotationDeg)),f.rotateY(m.l.degToRad(n.intYRotationDeg)),f.rotateZ(m.l.degToRad(n.intXRotationDeg)),p=new m.n({color:16776960}),v=new m.m(f,p),g=u.parse(v),this.exportText(g,"text/plain",n.stringName||"test.stl");case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSampleDesigns",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.Confirm("Load sample designs?");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=this.designStoreState.designStore,e.next=7,Z.a.get("SampleDesigns.json");case 7:n=e.sent,t.replaceStorageModel(n.data);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadDesigns",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.designStoreState.storageModel,e.next=3,z.b.Modal("Download designs",{stringName:"CarBodyDesigns.json"});case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:r=JSON.stringify(t,null,2),this.exportText(r,"application/json",n.stringName||"CarBodyDesigns.json");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadDesigns",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.b.Modal("Upload designs",{flagAppendToExisting:!1});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=this.designStoreState.designStore,(r=document.createElement("input")).setAttribute("type","file"),r.setAttribute("accept","application/json"),r.onchange=function(){var e,i=null===r||void 0===r||null===(e=r.files)||void 0===e?void 0:e[0];if(i){var a=new FileReader;a.onload=function(){var e=Object(G.a)(B.a.mark((function e(r){var i,a,o,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===r||void 0===r||null===(i=r.target)||void 0===i?void 0:i.result)){e.next=7;break}if((s=JSON.parse(null===r||void 0===r||null===(a=r.target)||void 0===a||null===(o=a.result)||void 0===o?void 0:o.toString())).version){e.next=6;break}return e.next=5,z.a.Notification("Provided file is not a designs model");case 5:return e.abrupt("return");case 6:t.flagAppendToExisting?n.appendStorageModel(s):n.replaceStorageModel(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(i)}},document.body.appendChild(r),r.click(),r.remove();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetAll",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.designStoreState.designStore,e.next=3,z.a.Confirm("Reset all designs?");case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.resetAll();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newDesign",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.designStoreState.designStore,n=new Date,e.next=4,z.b.Modal("New Design",{stringName:"".concat(n.toLocaleDateString()," - ").concat(n.toLocaleTimeString())});case 4:(r=e.sent)&&(i=t.newDesing(r.stringName),t.updateDesign(i));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cloneDesign",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,i,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState,n=t.design,r=t.designStore,n){e.next=3;break}return e.abrupt("return");case 3:return i=new Date,e.next=6,z.b.Modal("Clone Design",{stringName:"".concat(n.name," - ").concat(i.toLocaleDateString()," - ").concat(i.toLocaleTimeString())});case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return");case 9:(o=T.a.clone(n)).name=a.stringName,r.updateDesign(o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDesign",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState,n=t.design,r=t.designStore,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,z.a.Confirm("Delete ".concat(n.name));case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:r.deleteDesign(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"settings",value:function(){var e=Object(G.a)(B.a.mark((function e(){var t,n,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.designStoreState,n=t.design,r=t.designStore,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,z.b.Modal(n.name,{stringName:n.name,colorOdd:n.colorOdd,colorEven:n.colorEven});case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:r.updateDesign(n,(function(e){e.name=i.stringName,e.colorOdd=i.colorOdd,e.colorEven=i.colorEven}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"modify",value:function(e){var t=this.props,n=t.renderSettingsChanged,r=t.renderSettings;n(Object(l.a)(Object(l.a)({},r),e))}},{key:"toggleWireframes",value:function(){this.modify({wireframes:!this.props.renderSettings.wireframes})}},{key:"toggleFlatShading",value:function(){this.modify({flatShading:!this.props.renderSettings.flatShading})}},{key:"render",value:function(){var e=this,t=(new H).MainToolbar((function(){return e.dso}),(function(){return e.props.renderSettings}),(function(t){return e.modify(t)}));return o.a.createElement(A.a,{iconParams:{bordered:!0,size:"large"},items:t,className:"menu menu-top"})}},{key:"dso",get:function(){var e=this.props.designStoreState;return new Q(e)}}]),n}(o.a.Component),ee=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(h.a)(this,n),(r=t.call(this,e))._updateStream=new C.a;var i=new L;return r.state={designStore:i,renderSettings:{wireframes:!1,flatShading:!1},designStoreState:i.state,currentSectionData:{front:null,side:null,top:null},showSectionSelector:!1,currentSection:0},r._updateStream.pipe(Object(E.a)((function(){return Object(M.a)(500)}))).subscribe((function(){return r.forceUpdate()})),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.designStore.subscribe((function(t){return e.setState({designStoreState:t})})),this.subscribeForResizeEvents(),window.ontouchstart=function(e){e.touches.length>1&&e.preventDefault()}}},{key:"subscribeForResizeEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e._updateStream.next({})}))}},{key:"renderDesign",value:function(){var e=this,t=this.state,n=t.designStoreState,r=t.designStore,a=t.renderSettings,s=t.currentSectionData,c=t.showSectionSelector,h=t.currentSection,d=n.design;if(!d)return null;var f=d.boxSize,p=d.frontPoints,v=d.sidePoints,m=d.topPoints,g=d.wheels,y=d.frontSegments,b=function(e){var t=Object(l.a)(Object(l.a)({},d),e);r.updateDesign(t)};new j(f.x,f.y,f.z,i.All).applyContour(v,p,m,g,[]);var w=new O(p,y),k=y[s.front||0],C=k?w.query((s.front||0)-1):w.query(s.front||0),E=function(t,n){e.setState({currentSectionData:Object(l.a)(Object(l.a)({},s),{},{front:t?n:null}),showSectionSelector:t,currentSection:n})},M=window.innerHeight-100,D={width:window.innerWidth,height:M},T={height:M/2},R={width:window.innerWidth/2,height:M/2},N=Math.floor(window.innerWidth/2),W=Math.floor(M/2);return console.log(N,W),o.a.createElement("div",{className:"main-layout-div",style:D},o.a.createElement("div",{className:"main-layout-row",style:T},o.a.createElement("div",{className:"main-layout-cell",style:R},o.a.createElement(q,{id:"front",title:"Front (".concat(p.length,"x").concat(f.z,")"),symmetrical:!0,width:N,height:W,contour:p,maxY:f.z,onCountourChange:function(e){b({frontPoints:e})},wheels:null,wheelDrawing:S.None,sections:f.x,onSectionSelected:E,onSectionChanged:function(e,t){var n=Object(u.a)(d.frontSegments);e.forEach((function(r){r===e[0]&&null!==t?n[r]=t.map((function(e){return{x:e.x,y:e.y}})):delete n[r]})),b({frontSegments:n})},sectionBaseline:C,section:k,onInterpolateSections:function(){},showSectionSelector:c,currentSection:h,design:d,sectionMode:x.Edit})),o.a.createElement("div",{className:"main-layout-cell",style:R},o.a.createElement(q,{id:"top",title:"Top (".concat(m.length,"x").concat(f.y,")"),symmetrical:!1,width:N,height:W,contour:m,maxY:f.y,onCountourChange:function(e,t){b({topPoints:e,wheels:t||[]})},wheels:g,wheelDrawing:S.Top,sections:f.z,onSectionSelected:E,onSectionChanged:function(e,t){},section:null,sectionBaseline:null,showSectionSelector:c,currentSection:h,design:d,sectionMode:x.Pick}))),o.a.createElement("div",{className:"main-layout-row",style:T},o.a.createElement("div",{className:"main-layout-cell",style:R},o.a.createElement(q,{id:"side",title:"Side (".concat(v.length,"x").concat(f.z,")"),symmetrical:!1,width:N,height:W,contour:v,maxY:f.z,onCountourChange:function(e,t){b({sidePoints:e,wheels:t||[]})},wheels:g,wheelDrawing:S.Side,sections:f.y,onSectionSelected:E,onSectionChanged:function(e,t){},section:null,sectionBaseline:null,showSectionSelector:c,currentSection:h,design:d,sectionMode:x.Pick})),o.a.createElement("div",{className:"main-layout-cell",style:R},o.a.createElement(P,{width:N,height:W,design:d,renderSettings:a}))))}},{key:"renderDesignSelector",value:function(){var e=this.state,t=e.designStore,n=e.designStoreState,r=n.storageModel,i=n.design;return o.a.createElement("div",{className:"menu menu-top"},r.designs.map((function(e){var n={"design-selector":!0,"design-selector-active":e===i};return o.a.createElement("div",{key:e.name,className:y.Tools.classNames(n),onClick:function(){t.setActiveDesign(e)}},e.name)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.designStore,r=t.designStoreState,i=t.renderSettings;return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("div",{className:"app-toolbars"},o.a.createElement($,{designStore:n,designStoreState:r,renderSettings:i,renderSettingsChanged:function(t){return e.setState({renderSettings:t})}}),this.renderDesignSelector()),this.renderDesign()),o.a.createElement(z.c,null))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(2),a=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"withinRange",value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e<r?r:e>i?i:e}},{key:"between",value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>r&&e<i}},{key:"betweenInclusive",value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}},{key:"classNames",value:function(e){return e?Object.keys(e).filter((function(t){return e[t]})).join(" "):""}},{key:"clone",value:function(e){var t=JSON.stringify(e);return JSON.parse(t)}},{key:"pythHB",value:function(e,t){return Math.sqrt(e*e-t*t)}},{key:"pythBP",value:function(e,t){return Math.sqrt(e*e+t*t)}}]),e}()},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(14),i=n(8),a=n.n(i),o=n(12),s=n(1),c=n(2),u=n(5),l=n(51),h=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"OKCancelButtons",value:function(e){return[{label:"OK",onClick:function(){return e(!0)}},{label:"Cancel",onClick:function(){return e(!1)}}]}},{key:"CloseButtons",value:function(e){return[{label:"Close",onClick:function(){return e(!1)}}]}},{key:"Add",value:function(t){e.DialogsStream.next({add:[t],remove:[]})}},{key:"Remove",value:function(t){e.DialogsStream.next({add:[],remove:[t]})}},{key:"Confirm",value:function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Modal({title:n,icon:"AiOutlineWarning",body:null,buttonsFactory:function(e){return[{label:"OK",onClick:function(){return e(!0)}},{label:"Cancel",onClick:function(){return e(!1)}}]}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"Notification",value:function(){var t=Object(o.a)(a.a.mark((function t(n){var i,o,s=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:null,o=s.length>2&&void 0!==s[2]?s[2]:{},t.next=4,e.Modal(Object(r.a)({title:n,icon:"AiOutlineWarning",body:i,buttonsFactory:function(e){return[{label:"Cancel",onClick:function(){return e(!1)}}]}},o||{}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"Modal",value:function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var i,a=n.buttonsFactory((function(n){t(n),e.Remove(o)})).map((function(e){return u.createElement("div",{key:e.label,className:"modal-button",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.onClick()}},e.label)})),o={title:n.title,icon:n.icon,body:n.body,footer:u.createElement("div",null,a)};null===(i=n.genericDialogCallback)||void 0===i||i.call(n,o),e.Add(o)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();h.DialogsStream=new l.a},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return k}));var r=n(11),i=n(1),a=n(2),o=n(3),s=n(4),c=n(5),u=n(71),l=n(35),h=n(49),d=n(72),f=n(22),p=n(50),v=n(73),m=n(52),g=n(74),y=n(53),b=n(75),w=n(76),S=n(9),x=(n(88),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getIcon",value:function(){var e=this.props,t=e.type,n=e.title,i=void 0===n?"":n,a=e.readOnlyTitle,o=e.bordered,s=void 0!==o&&o,x=e.readOnly,k=void 0!==x&&x,O=e.hidden,j=void 0!==O&&O,C=e.className,E=e.selected,M=void 0!==E&&E,D=e.size,P=void 0===D?"medium":D,T=e.onClick,R=Object(r.a)({icon:!0,"icon-selected":M,"icon-bordered":s,"icon-readonly":k,"icon-hidden":j},"icon-".concat(P),!0);C&&(R[C]=!0);var N={title:k?i+(a?" (".concat(a,")"):""):i,className:S.Tools.classNames(R),onClick:function(){k||null===T||void 0===T||T()}};switch(t){case"CgEditShadows":return c.createElement(u.a,N);case"GiWireframeGlobe":return c.createElement(l.d,N);case"GrPowerReset":return c.createElement(h.c,N);case"VscNewFile":return c.createElement(d.a,N);case"AiOutlineInfoCircle":return c.createElement(f.j,N);case"AiOutlineCloseCircle":return c.createElement(f.d,N);case"AiOutlineWarning":return c.createElement(f.m,N);case"GrClone":return c.createElement(h.a,N);case"ImMoveUp":return c.createElement(p.b,N);case"ImMoveDown":return c.createElement(p.a,N);case"AiOutlineBorderTop":return c.createElement(f.c,N);case"AiOutlineBorderBottom":return c.createElement(f.b,N);case"AiOutlineFullscreen":return c.createElement(f.g,N);case"AiOutlineSetting":return c.createElement(f.k,N);case"AiOutlineExport":return c.createElement(f.e,N);case"GiWhiplash":return c.createElement(l.c,N);case"ImPencil2":return c.createElement(p.c,N);case"GiCartwheel":return c.createElement(l.a,N);case"GiSlicedBread":return c.createElement(l.b,N);case"AiOutlineTwitter":return c.createElement(f.l,N);case"AiOutlineGithub":return c.createElement(f.i,N);case"AiOutlineFastForward":return c.createElement(f.f,N);case"TiArrowForwardOutline":return c.createElement(v.a,N);case"BiChip":return c.createElement(m.a,N);case"RiDeleteBack2Line":return c.createElement(g.a,N);case"AiFillLock":return c.createElement(f.a,N);case"AiOutlineFunction":return c.createElement(f.h,N);case"FiUpload":return c.createElement(y.b,N);case"FiDownload":return c.createElement(y.a,N);case"BiHelpCircle":return c.createElement(m.b,N);case"GrFavorite":return c.createElement(h.b,N);case"FaUniversity":return c.createElement(b.a,N);case"FcViewDetails":return c.createElement(w.a,N);default:return null}}},{key:"render",value:function(){return c.createElement("div",{className:"icon-container"},this.getIcon())}}]),n}(c.Component)),k=function(e){var t=e.size,n=e.className,i=Object(r.a)({"icon-separator":!0},"icon-".concat(t),!0);return n&&(i[n]=!0),c.createElement("div",{className:"icon-container"},c.createElement("div",{className:S.Tools.classNames(i)},"\xa0"))}},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(8),i=n.n(r),a=n(12),o=n(1),s=n(2),c=n(3),u=n(4),l=n(5),h=n.n(l),d=n(25),f=n(32),p=n(42),v=(n(92),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.items,r=e.iconParams,i={size:r.size},a=n.map((function(e,t){var n;return e.isSeparator?h.a.createElement(d.b,Object.assign({key:t},i)):h.a.createElement(d.a,Object.assign({key:t},r,{type:e.icon,title:e.title,selected:null===(n=e.selected)||void 0===n?void 0:n.call(e),onClick:e.action},e.iconParams||{}))}));return h.a.createElement("div",{className:t},a)}}],[{key:"Modal",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,f.a.Notification(t,h.a.createElement(p.a,{items:n,dialogFactory:function(){return r}}),{genericDialogCallback:function(e){return r=e}});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(h.a.Component))},32:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h.a}));var r=n(16),i=n(1),a=n(2),o=n(3),s=n(4),c=n(5),u=n(43),l=n(25),h=n(21),d=(n(90),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).internalDialogs=[],r.state={dialogs:[]},r}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;h.a.DialogsStream.subscribe((function(t){console.log("Add",t.add.map((function(e){return e.title}))),console.log("Remove",t.remove.map((function(e){return e.title})));var n=[].concat(Object(r.a)(e.internalDialogs.filter((function(e){return!t.remove.includes(e)}))),Object(r.a)(t.add));console.log("Current",n.map((function(e){return e.title}))),e.setState({dialogs:n})}))}},{key:"render",value:function(){var e=this.state.dialogs,t=e.length?c.createElement("div",{className:"modal-backdrop"}):null,n=e.map((function(e,t){var n=e.title,r=e.icon,i=e.body,a=e.footer;return c.createElement("div",{key:t,className:"modal-dialog"},c.createElement("div",{className:"modal-header"},r&&c.createElement("div",{className:"modal-header-icon"},c.createElement(l.a,{type:r,size:"small"})),c.createElement("div",{className:"modal-header-title"},n)),i&&c.createElement("div",{className:"modal-body"},i),a&&c.createElement("div",{className:"modal-footer"},a))})),r=n.length?c.createElement("div",{className:"modal-container"},n):null,i=c.createElement("div",{className:"modal",onSelect:function(e){return console.log(e)}},t,r);return Object(u.createPortal)(i,document.body,"modals")}}]),n}(c.Component)),f=n(8),p=n.n(f),v=n(12),m=n(11),g=(n(91),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={model:e.model},r}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props.modified,n=this.state.model;if(!n)return null;var r=Object.keys(n).map((function(r){var i=r.split("").findIndex((function(e){return e.toUpperCase()===e}));if(i<=0)return c.createElement("div",{key:r},"Component type cannot be inferred: ",r);var a=r.substring(i).split("").map((function(e,t){return 0===t?e:e===e.toUpperCase()?" ".concat(e):e})).join(""),o=function(e){return c.createElement("div",{key:r},c.createElement("div",{className:"form-label"},a),c.createElement("div",{className:"form-control-container"},e))},s=function(i){var a=Object.assign({},n,Object(m.a)({},r,i));e.setState({model:a},(function(){return t(e.state.model)}))},u=r.substring(0,i);switch(u){case"flag":return o(c.createElement("input",{className:"form-control",type:"checkbox",checked:!!n[r],onChange:function(e){return s(e.target.checked)}}));case"int":return o(c.createElement("input",{className:"form-control",type:"number",value:n[r],onChange:function(e){return s(parseInt(e.target.value||"0"))}}));case"string":return o(c.createElement("input",{className:"form-control",type:"string",value:n[r],onChange:function(e){return s(e.target.value||"")}}));case"color":var l;return o(c.createElement("input",{className:"form-control",type:"color",value:"#".concat((null!==(l=n[r])&&void 0!==l?l:0).toString(16).padStart(6,"0")),onChange:function(e){var t;s(parseInt((null!==(t=e.target.value)&&void 0!==t?t:"#000000").substring(1),16))}}));default:return o(c.createElement("div",null,"Unsupported field type: ",u))}}));return c.createElement("form",{className:"form"},r)}}]),n}(c.Component)),y=function(){function e(){Object(i.a)(this,e)}return Object(a.a)(e,null,[{key:"Modal",value:function(){var e=Object(v.a)(p.a.mark((function e(t,n){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",n);case 2:return r=n,i=c.createElement(g,{model:n,modified:function(e){return r=e}}),e.next=6,h.a.Modal({title:t,icon:"AiOutlineInfoCircle",body:i,buttonsFactory:h.a.OKCancelButtons});case 6:if(e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5),c=n.n(s),u=n(25),l=n(32),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.dialogFactory,r=t.map((function(e,t){var r;return e.isSeparator?c.a.createElement("tr",{key:t},c.a.createElement("td",{colSpan:2,className:"toolbar-legend-separator"})):c.a.createElement("tr",{key:t},c.a.createElement("td",{className:"toolbar-legend-icon"},c.a.createElement(u.a,{type:e.icon,selected:null===(r=e.selected)||void 0===r?void 0:r.call(e),onClick:function(){var t,r=null===n||void 0===n?void 0:n();r&&(l.a.Remove(r),null===(t=e.action)||void 0===t||t.call(e))}})),c.a.createElement("td",null,e.title))}));return c.a.createElement("table",{className:"toolbar-legend"},c.a.createElement("tbody",null,r))}}]),n}(c.a.Component)},54:function(e,t,n){"use strict";var r=n(60);n.o(r,"ToolbarLegend")&&n.d(t,"ToolbarLegend",(function(){return r.ToolbarLegend}));n(31);var i=n(42);n.d(t,"ToolbarLegend",(function(){return i.a}))},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(2),a=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"inclusive",value:function(t,n){return t>n?e.range(t,n-t-1):e.range(t,n-t+1)}},{key:"range",value:function(e,t){var n=[];if(0===t)return[];if(t>0)for(var r=0;r<t;r++)n.push(r+e);else for(var i=0;i>t;i--)n.push(i+e);return n}}]),e}()},57:function(e,t,n){"use strict";n(1),n(2)},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),i=n(2),a=n(51),o=n(113),s=function(){function e(t,n){Object(r.a)(this,e),this._subject=new a.a,this._subject.pipe(Object(o.a)(t)).subscribe((function(e){e&&e.length&&n(e)}))}return Object(i.a)(e,[{key:"next",value:function(e){this._subject.next(e)}}]),e}()},59:function(e,t){},60:function(e,t){},61:function(e,t,n){},80:function(e,t,n){e.exports=n(112)},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},9:function(e,t,n){"use strict";var r=n(56);n.d(t,"Generate",(function(){return r.a}));n(57);var i=n(58);n.d(t,"BufferStream",(function(){return i.a}));var a=n(20);n.d(t,"Tools",(function(){return a.a}));n(59)},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.09002437.chunk.js.map